import{_ as e,g as l,a as o,u as t,L as s,C as a,E as r,T as i,o as n,c as d,w as u,b as p,n as c,d as g,m,q as h,t as y,k as f,e as b,F as w,Z as x,a0 as v,a1 as _,f as C,i as k,v as L,$ as R}from"./index-DukxopBg.js";import{_ as B,L as V}from"./LoginFotter.HXxnQpk8.js";import{L as T}from"./LoginHeader.GMo4dMv6.js";import{T as U}from"./toast.Cnh95VuC.js";import{p as I,n as j}from"./no-value-password.DgQ_hq7X.js";import{h as N,s as F}from"./show.DQ22mQAi.js";import{_ as O,a as S}from"./no-check.DdAD1LLF.js";import"./back.DsRJx4W9.js";const $=e({__name:"Register",setup(e){const $=l(),z=o(),H=t().theme.loginV2,G=t(),{t:J}=s();let A=a(0),q=a(!0),E=a(!0),P=r({phone:"",otp:"",password:""}),Z=a(null),D=a(0),K=a(J("login.button.send"));const M=e=>{A.value=e,E.value=!0,q.value=!0,P.phone="",P.otp="",P.password="",Z.value=null,D.value=0,K.value=J("login.button.send")},Q=()=>{q.value=!q.value},W=()=>{E.value=!E.value},X=()=>{},Y=async()=>{if(0==D.value){if(""==P.phone)return void U.show(J("login.toast.phone"));U.showLoading("Loading");const{code:e,data:l}=await x({tel:P.phone});U.hideLoading(),200==e&&(D.value=l,ee())}},ee=()=>{K.value=D.value+"s",Z.value=setInterval((()=>{D.value>0?(D.value--,K.value=D.value+"s"):(K.value=J("login.button.otp"),D.value=0,clearInterval(Z.value))}),1e3)},le=async()=>{if(q){if(0==A.value){if(""==P.phone)return void U.show(J("login.toast.phone"));if(""==P.otp)return void U.show(J("login.toast.oth"));if(""==P.password)return void U.show(J("login.toast.password"));U.showLoading("Loading");const{code:e,data:l}=await v({mobile:P.phone,password:P.password,verificationCode:P.otp});if(U.hideLoading(),200!==e)return;U.showLoading("Loading");const o=await $.idPasswordLogin({phoneNumber:P.phone,password:P.password});if(U.hideLoading(),!o)return;_({url:"/pages/home/Home"})}1==A.value&&(U.showLoading("Loading"),await $.guestLogin(),U.hideLoading(),$.isOneClickRegister=!0,_({url:"/pages/home/Home"}))}};return(e,l)=>{const o=C,t=k,s=L,a=R,r=i("common-layout");return n(),d(r,null,{default:u((()=>[p(o,{class:"login-body",style:c({background:g(G).theme.home.bgColor,backgroundSize:"100% 100%"})},{default:u((()=>[p(o,{style:c({height:g(z).headerStyle.statusBarHeight+"px"})},null,8,["style"]),p(T,{title:e.$t("login.header.register")},null,8,["title"]),p(o,{class:"login-content"},{default:u((()=>[p(o,{class:"flex-scenter"},{default:u((()=>[p(t,{class:"login-logo",src:B,mode:"aspectFit"})])),_:1}),p(o,{class:"login-form"},{default:u((()=>[p(o,{class:"login-form-header",style:c({borderBottomColor:g(H).lightGreyBg})},{default:u((()=>[p(s,{class:m(["login-form-header-item",0==g(A)?"active":""]),style:c({color:0==g(A)?g(H).tabs.highlight:g(H).tabs.normal,borderBottomColor:0==g(A)?g(H).inputBorderColor:"none"}),onClick:l[0]||(l[0]=e=>M(0))},{default:u((()=>[h(y(g(J)("login.header.phone")),1)])),_:1},8,["style","class"]),p(s,{class:m(["login-form-header-item",1==g(A)?"active":""]),style:c({color:1==g(A)?g(H).tabs.highlight:g(H).tabs.normal,borderBottomColor:1==g(A)?g(H).inputBorderColor:"none"}),onClick:l[1]||(l[1]=e=>M(1))},{default:u((()=>[h(y(g(J)("login.header.oneClick")),1)])),_:1},8,["style","class"])])),_:1},8,["style"]),p(o,{class:"login-form-content"},{default:u((()=>[0==g(A)?(n(),f(w,{key:0},[p(o,{class:"login-form-input-item",style:c({background:g(H).inputeItemBg,borderRadius:g(H).borderRadius,border:g(H).inputItemBorderColor})},{default:u((()=>[p(o,{class:"login-form-input-item-label",style:c({color:""!=g(P).phone?g(H).text.labelValue:g(H).text.labelNoValue})},{default:u((()=>[h("+91")])),_:1},8,["style"]),p(a,{type:"text",modelValue:g(P).phone,"onUpdate:modelValue":l[2]||(l[2]=e=>g(P).phone=e),maxlength:"10",style:c({color:g(H).text.normal}),"placeholder-style":JSON.stringify({color:g(H).text.tipTextColor}),class:"input-style input-style-width",placeholder:e.$t("login.placeholder.phone")},null,8,["modelValue","style","placeholder-style","placeholder"])])),_:1},8,["style"]),p(o,{class:"login-form-otp-content m-top"},{default:u((()=>[p(o,{style:c({width:0==g(H).isRedUl?"405rpx":"444rpx"})},{default:u((()=>[p(o,{class:"login-form-input-item",style:c({background:g(H).inputeItemBg,borderRadius:g(H).borderRadius,border:g(H).inputItemBorderColor})},{default:u((()=>[1==g(H).isRedUl?(n(),d(o,{key:0,class:"login-form-input-item-label",style:c({color:""!=g(P).otp?g(H).text.labelValue:g(H).text.labelNoValue})},{default:u((()=>[h(y(g(J)("login.button.otp")),1)])),_:1},8,["style"])):b("",!0),p(a,{type:"text",modelValue:g(P).otp,"onUpdate:modelValue":l[3]||(l[3]=e=>g(P).otp=e),style:c({color:g(H).text.normal,paddingLeft:0==g(H).isRedUl?"46rpx":"0"}),class:m([0==g(H).isRedUl?"input-style-red-width":"input-style-width","input-style"]),"placeholder-style":JSON.stringify({color:g(H).text.tipTextColor}),placeholder:e.$t("login.placeholder.loginOtp")},null,8,["modelValue","style","class","placeholder-style","placeholder"])])),_:1},8,["style"])])),_:1},8,["style"]),p(o,{class:"get-otp-btn",style:c({background:g(H).intervalBg,color:g(H).text.btnTextColor,borderRadius:g(H).borderRadius,width:0==g(H).isRedUl?"276rpx":"185rpx"}),onClick:Y},{default:u((()=>[h(y(g(K)),1)])),_:1},8,["style"])])),_:1}),p(o,{class:"login-form-input-item m-top",style:c({background:g(H).inputeItemBg,borderRadius:g(H).borderRadius,border:g(H).inputItemBorderColor})},{default:u((()=>[1==g(H).isRedUl?(n(),d(o,{key:0,style:{width:"102rpx"}},{default:u((()=>[p(t,{src:""!=g(P).password?g(I):g(j),class:"password-size"},null,8,["src"])])),_:1})):b("",!0),p(a,{type:g(E)?"password":"text",modelValue:g(P).password,"onUpdate:modelValue":l[4]||(l[4]=e=>g(P).password=e),style:c({color:g(H).text.normal,paddingLeft:0==g(H).isRedUl?"46rpx":"0"}),"placeholder-style":JSON.stringify({color:g(H).text.tipTextColor}),class:m([0==g(H).isRedUl?"input-style-red-width1":"input-style-width1","input-style"]),placeholder:e.$t("login.placeholder.password")},null,8,["type","modelValue","style","placeholder-style","class","placeholder"]),p(t,{src:""!=g(E)?g(N):g(F),mode:"scaleToFill",onClick:W,class:"suffix-size"},null,8,["src"])])),_:1},8,["style"])],64)):b("",!0),1==g(A)?(n(),d(o,{key:1,class:"one-click-tips",style:c({color:g(H).text.normal})},{default:u((()=>[h(y(g(J)("login.tips.oneClickTips")),1)])),_:1},8,["style"])):b("",!0),p(o,{class:"tip"},{default:u((()=>[p(t,{src:g(q)?g(O):g(S),class:"ischeck-size",onClick:Q,mode:"scaleToFill"},null,8,["src"]),p(o,{class:"tip-text",style:c({color:g(H).text.normal})},{default:u((()=>[h(y(g(J)("login.tips.rgisterTipText"))+" ",1),p(s,{class:"termsAndConditions",style:c({color:g(H).text.agreementTextColor}),onClick:X},{default:u((()=>[h(y(g(J)("login.tips.termsAndConditions")),1)])),_:1},8,["style"])])),_:1},8,["style"])])),_:1}),p(o,{class:"submit",style:c({background:g(G).theme.button.linearGolden,color:g(G).theme.button.linearGoldenText}),onClick:le},{default:u((()=>[h(y(g(J)("login.button.submit")),1)])),_:1},8,["style"])])),_:1})])),_:1}),p(V)])),_:1})])),_:1},8,["style"])])),_:1})}}},[["__scopeId","data-v-1f887c77"]]);export{$ as default};
