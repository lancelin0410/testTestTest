import{r as h,j as F,B as P,H as u,I as C,J as c,C as o,E as t,K as m,L as B,F as U,U as I,M as d,P as r,Q as g,O as N,V as $}from"./@vue-Byjcq-FP.js";import{u as J}from"./vue-i18n-CK_WgmAH.js";import{t as y,L as W,K as _,P as A,O as j,i as E,j as H,k as K,m as z,o as S,U as Q,R as v,d as b,h as q,M as G,V as X}from"./@ionic-qvL_eljm.js";import{b as Y,a as Z,f as tt,g as at,h as et}from"./ionicons-T4lv_k6t.js";import{c as ot,e as nt,m as lt,u as ct,n as st}from"./index-CM7ROxy-.js";import"./@intlify-BAcCFw_v.js";import"./@stencil-DBaMOtEh.js";import"./@capacitor-BXp5o1ZG.js";import"./vue-router-CLGTjHYu.js";import"./localforage-qzmIiYbH.js";import"./@adjustcom-Dev-Q0DI.js";import"./pinia-DpQ9eBLY.js";import"./pinia-plugin-persistedstate-2-DcGv4gw_.js";import"./@awesome-cordova-plugins-CT7d7gQP.js";import"./rxjs-C3tg6S9t.js";import"./tslib-BHBn2Msb.js";const ut={style:{color:"#fdea5a"}},rt={style:{margin:"4px 0"}},it={class:"block-title"},dt={key:0,style:{margin:"4px 0"}},pt={class:"block-title"},mt={key:1,style:{margin:"4px 0"}},ft={class:"block-title"},wt={key:2,style:{margin:"4px 0"}},ht=d("div",{class:"block-title"},"CNIC",-1),Ct=d("span",{class:"input-prefix",slot:"start"},"CNIC",-1),It={key:3,style:{margin:"4px 0"}},gt={class:"block-title"},Dt={__name:"BankCardList",setup(vt){const{t:L}=J(),i=ot(),R=nt(),{getImgUrl:k}=ct(),f=h([]),V=h(!0),w=h(!1),s=h({}),l=F({accountName:null,accountNumber:null,CNIC:null,accountIfsc:null});P(async()=>{var n;i.barLoading=!0;const e=await lt({userId:R.userInfo.id});e.state==="200"?(e.resultData.withdrawAccounts=[{id:210,userId:3506,withdrawType:1,withdrawTypeId:1,withdrawAccount:'{"accountName":"Lucky","accountIfsc":"ABCD0777777","accountNumber":"111111","CNIC":null}'}],f.value=((n=e.resultData.withdrawAccounts)==null?void 0:n.map(a=>{a.withdrawAccount=JSON.parse(a.withdrawAccount);const p=i.appConfig.withdrawTypes.filter(T=>a.withdrawTypeId==T.id);return p.length>0&&(a.iconUrl=p[0].iconUrl),a}))||[],V.value=!(i.appConfig.withdrawTypes.length==f.value.length&&f.value.length!=0),s.value=f.value[0]):await(await y.create({message:e.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present(),i.barLoading=!1});const x=()=>{s.value=i.appConfig.withdrawTypes[0],l.accountName=null,l.accountNumber=null,l.CNIC=null,l.accountIfsc=null,w.value=!0},O=e=>{w.value=!0},D=async()=>{if(console.log(s.value.withdrawAccountRule,l),s.value.withdrawAccountRule.includes("accountName")&&!l.accountName||s.value.withdrawAccountRule.includes("accountNumber")&&!l.accountNumber||s.value.withdrawAccountRule.includes("CNIC")&&!l.CNIC||s.value.withdrawAccountRule.includes("accountIfsc")&&!l.accountIfsc)return;if(l.accountIfsc.split("")[4]!="0"){await(await y.create({message:L("account.bankCard.tips.ifscTips"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}i.fullLoading=!0,(await st({withdrawAccount:JSON.stringify(l),withdrawTypeId:s.value.id})).state=="200"&&(await(await y.create({message:"Success",duration:1500,position:"top",translucent:!0,icon:checkmarkOutline,color:"success"})).present(),w.value=!1),i.fullLoading=!1},M=(e,n)=>e&&n?e.id===n.id:e===n;return(e,n)=>(u(),C(t(q),{class:"bank-card-list"},{default:c(()=>[o(t(S),null,{default:c(()=>[o(t(W),null,{default:c(()=>[(u(!0),m(U,null,B(f.value,(a,p)=>(u(),C(t(G),{key:p,class:$(["account-item",{select:!0}]),lines:"none"},{default:c(()=>[o(t(b),{slot:"start",src:a.iconUrl},null,8,["src"]),d("span",null,r(e.$t("account.bankCard.text.accNo"))+" "+r(a.withdrawAccount.accountNumber),1),o(t(A),{slot:"end",icon:t(et),onClick:I(T=>O(a.id),["stop"])},null,8,["icon","onClick"])]),_:2},1024))),128))]),_:1}),(V.value,u(),C(t(_),{key:0,fill:"clear",expand:"block",onClick:I(x,["stop"])},{default:c(()=>[o(t(A),{slot:"start",icon:t(Y),style:{color:"#fdea5a"}},null,8,["icon"]),d("span",ut,r(e.$t("account.bankCard.text.addBankCardText")),1)]),_:1})),o(t(j),{class:"account-info","is-open":w.value},{default:c(()=>[o(t(E),null,{default:c(()=>[o(t(H),null,{default:c(()=>[o(t(K),{slot:"start"},{default:c(()=>[o(t(_),{onClick:n[0]||(n[0]=I(a=>w.value=!1,["stop"]))},{default:c(()=>[o(t(A),{slot:"icon-only",icon:t(Z),color:"light"},null,8,["icon"])]),_:1})]),_:1}),o(t(z),null,{default:c(()=>[N(r(e.$t("account.header.withdrawalBankTitle")),1)]),_:1})]),_:1})]),_:1}),o(t(S),{class:"ion-padding"},{default:c(()=>[d("div",rt,[d("div",it,r(e.$t("account.bankCard.labels.accountType")),1),o(t(Q),{modelValue:s.value,"onUpdate:modelValue":n[1]||(n[1]=a=>s.value=a),class:$(["account-type-select",{hide:t(i).appConfig.withdrawTypes.length<2}]),mode:"md",interface:"popover",fill:"outline",color:"danger","toggle-icon":t(tt),"expanded-icon":t(at),compareWith:M},{default:c(()=>[(u(!0),m(U,null,B(t(i).appConfig.withdrawTypes,(a,p)=>(u(),C(t(X),{key:p,value:a},{default:c(()=>[N(r(a.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","class","toggle-icon","expanded-icon"])]),s.value.withdrawAccountRule.includes("accountName")?(u(),m("div",dt,[d("div",pt,r(e.$t("account.bankCard.labels.accountName")),1),o(t(v),{modelValue:l.accountName,"onUpdate:modelValue":n[2]||(n[2]=a=>l.accountName=a),placeholder:e.$t("account.bankCard.placeholder.accountName")},{default:c(()=>[o(t(b),{class:"input-prefix",slot:"start",src:t(k)("/account/icon/user.png")},null,8,["src"])]),_:1},8,["modelValue","placeholder"])])):g("",!0),s.value.withdrawAccountRule.includes("accountNumber")?(u(),m("div",mt,[d("div",ft,r(e.$t("account.bankCard.labels.accountNumber")),1),o(t(v),{modelValue:l.accountNumber,"onUpdate:modelValue":n[3]||(n[3]=a=>l.accountNumber=a),placeholder:e.$t("account.bankCard.placeholder.accountNumber")},{default:c(()=>[o(t(b),{class:"input-prefix",slot:"start",src:t(k)("/account/icon/password.png")},null,8,["src"])]),_:1},8,["modelValue","placeholder"])])):g("",!0),s.value.withdrawAccountRule.includes("CNIC")?(u(),m("div",wt,[ht,o(t(v),{modelValue:l.CNIC,"onUpdate:modelValue":n[4]||(n[4]=a=>l.CNIC=a),placeholder:"CNIC"},{default:c(()=>[Ct]),_:1},8,["modelValue"])])):g("",!0),s.value.withdrawAccountRule.includes("accountIfsc")?(u(),m("div",It,[d("div",gt,r(e.$t("account.bankCard.labels.accountIfsc")),1),o(t(v),{modelValue:l.accountIfsc,"onUpdate:modelValue":n[5]||(n[5]=a=>l.accountIfsc=a),placeholder:e.$t("account.bankCard.placeholder.accountIfsc")},{default:c(()=>[o(t(b),{class:"input-prefix",slot:"start",src:t(k)("/account/icon/IFSC.png")},null,8,["src"])]),_:1},8,["modelValue","placeholder"])])):g("",!0),o(t(_),{class:"btn-confirm",expand:"block",shape:"round",onClick:I(D,["stop"])},{default:c(()=>[N(r(e.$t("account.button.confirmCapital")),1)]),_:1})]),_:1})]),_:1},8,["is-open"])]),_:1})]),_:1}))}};export{Dt as default};
