System.register(["./@vue-legacy-Bd-ybgzA.js","./@ionic-legacy-DPSKJYXl.js","./index-legacy-BfwNR54Q.js","./useMailStore-legacy-BJvPCKKI.js","./NoData-legacy-HCppDwmg.js","./vue-i18n-legacy-C-H4GryL.js","./@stencil-legacy-B3F1rWbF.js","./@capacitor-legacy-DN4LNBqm.js","./vue-router-legacy-D1r9FOl6.js","./ionicons-legacy-DYh71j0f.js","./localforage-legacy-D0pVUvDl.js","./@adjustcom-legacy-QP0zxLxB.js","./pinia-legacy-Dm_oCeSh.js","./pinia-plugin-persistedstate-2-legacy-CtlOhiZd.js","./@awesome-cordova-plugins-legacy-CuOL20OL.js","./rxjs-legacy-C12cs3ed.js","./tslib-legacy-BRpw1qYg.js","./@intlify-legacy-DDHA1rkh.js"],(function(a,i){"use strict";var e,t,l,n,o,s,r,c,p,m,d,u,g,h,v,f,b,w,y,x,k,j,L,_,M,z,S,C,I,O,A,D;return{setters:[a=>{e=a.r,t=a.H,l=a.I,n=a.J,o=a.M,s=a.C,r=a.E,c=a.P,p=a.K,m=a.R,d=a.V,u=a.O,g=a.B,h=a.L,v=a.F},a=>{f=a.d,b=a.K,w=a.O,y=a.t,x=a.L,k=a.h,j=a.M,L=a.E},a=>{_=a.c,M=a.u,z=a.l},a=>{S=a.u,C=a.r,I=a.a,O=a.d},a=>{A=a._},a=>{D=a.u},null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var i=document.createElement("style");i.textContent=".mail-popup{--background: var(--ion-background-light-color);--width: 88vw;--height: fit-content;--box-shadow: 0 28px 48px rgba(0, 0, 0, .4);--border-radius: 6px}.mail-popup .wrapper{margin:16px 8px;padding:0 12px;height:fit-content}.mail-popup .wrapper ion-img.btn-close{width:32px;height:32px;position:absolute;top:0;right:0}.mail-popup .wrapper .mail-title{text-align:center;margin-bottom:24px}.mail-popup .wrapper .mail-sub-title{position:relative;display:flex;align-items:center;justify-content:space-between;width:100%}.mail-popup .wrapper .mail-content{height:20vh;background:var(--ion-background-color);border-radius:6px;font-size:.8rem;color:#fff;line-height:24px;white-space:pre-wrap;padding:8px 12px;margin:16px 0;overflow-y:scroll}.mail-popup .wrapper .mail-attaches{position:relative;left:50%;transform:translate(-50%);width:80%;display:flex;align-items:center;justify-content:space-around;background:var(--ion-background-color);border-radius:6px;color:#fff;padding:8px 12px;margin:12px 0 24px}.mail-popup .wrapper ion-button{position:relative;left:50%;transform:translate(-50%);width:40%;color:#fff}.mail-popup .wrapper ion-button.btn-confirm{--background: linear-gradient(90deg, #f78d22, #e34e04);--background-activated: linear-gradient(45deg, #f78d22, #e34e04)}.mail-popup .wrapper ion-button.btn-del{--background: linear-gradient(0deg, #32b12f 0%, #10740b 100%);--background-activated: linear-gradient(30deg, #32b12f 0%, #10740b 100%)}.mail{position:relative}.mail .mail-item{position:relative;height:10vh;min-height:68px;margin-bottom:12px;border-radius:8px}.mail .mail-item::part(native){position:relative;height:100%}.mail .mail-item .mail-icon{position:relative;background:var(--ion-background-color);height:80%;aspect-ratio:1/1;padding:12px;margin-right:4px;border-radius:8px}.mail .mail-item .mail-icon ion-img{position:absolute}.mail .mail-item .mail-icon ion-img.mail-img{width:50%;top:50%;left:50%;transform:translate(-50%,-50%)}.mail .mail-item .mail-icon ion-img.mail-tag{width:40%;bottom:0;right:0}.mail .mail-item .mail-content{position:relative;width:100%;height:100%;padding:12px 8px;overflow:hidden}.mail .mail-item .mail-content .mail-title{position:relative;display:flex;align-items:center;justify-content:space-between;width:100%;height:20%}.mail .mail-item .mail-content .mail-title>div:first-child{width:55%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.mail .mail-item .mail-content .mail-detail{color:#fa8484;font-size:.8rem;margin:8px 2px;text-align:justify;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}.mail .no-data{position:relative;top:10vh}\n",document.head.appendChild(i);const E={class:"wrapper"},P={class:"mail-title"},R={class:"mail-sub-title"},$={style:{"font-size":"0.9rem"}},F={style:{"font-size":"0.7rem",color:"#FD5959"}},J={class:"mail-content"},K={key:0,class:"mail-attaches"},N={__name:"MailPopup",setup(a,{expose:i}){const{t:g}=D(),h=_(),v=S(),{getImgUrl:x}=M(),{popupEnter:k,popupLeave:j}=z(),L=e(!1),A=e({}),N=async()=>{h.barLoading=!0;const a=await I({mailId:A.value.id});if("200"===a.state){await v.getMailList(),h.barLoading=!1,L.value=!1,A.value.attachesStatus=1;const a=await y.create({message:g("mail.message.receiveSuccess"),duration:1500,position:"top",color:"success",translucent:!0});await a.present()}else{h.barLoading=!1;const i=await y.create({message:a.msg,duration:1500,position:"top",color:"danger",translucent:!0});await i.present()}},T=async()=>{h.barLoading=!0;const a=await O({mailId:A.value.id});if("200"===a.state){await v.getMailList(),h.barLoading=!1,L.value=!1;const a=await y.create({message:g("mail.message.deleteSuccess"),duration:1500,position:"top",color:"success",translucent:!0});await a.present()}else{const i=await y.create({message:a.msg,duration:1500,position:"top",color:"danger",translucent:!0});await i.present(),h.barLoading=!1}};return i({showMail:async a=>{if(h.barLoading=!0,0==a.isRead){const i=await C({mailId:a.id});if("200"===i.state)a.isRead=1;else{const a=await y.create({message:i.msg,duration:1500,position:"top",color:"danger",translucent:!0});await a.present()}}A.value=a,h.barLoading=!1,L.value=!0}}),(a,i)=>(t(),l(r(w),{class:"mail-popup",isOpen:L.value,enterAnimation:r(k),leaveAnimation:r(j),onDidDismiss:i[1]||(i[1]=a=>L.value=!1)},{default:n((()=>[o("div",E,[s(r(f),{class:"btn-close",src:r(x)("/mail/icon-popup-close.png"),onClick:i[0]||(i[0]=a=>L.value=!1)},null,8,["src"]),o("h3",P,c(A.value.title||""),1),o("div",R,[o("div",$,c(a.$t("mail.dearPlayer"))+":",1),o("div",F,c(A.value.createTime||""),1)]),o("div",J,c(A.value.content||""),1),A.value.attaches&&0===A.value.attachesStatus?(t(),p("div",K,[s(r(f),{src:r(x)("/mail/icon-coin.png"),style:{width:"35px",height:"35px"}},null,8,["src"]),o("div",null,c(Math.round(100*JSON.parse(A.value.attaches).amount)/100),1)])):m("",!0),A.value.attaches&&0===A.value.attachesStatus?(t(),l(r(b),{key:1,class:"btn-confirm ion-text-capitalize",fill:"solid",shape:"round",onClick:d(N,["stop"])},{default:n((()=>[u(c(a.$t("mail.button.confirm")),1)])),_:1})):(t(),l(r(b),{key:2,class:"btn-del ion-text-capitalize",fill:"solid",shape:"round",onClick:d(T,["stop"])},{default:n((()=>[u(c(a.$t("mail.button.delete")),1)])),_:1}))])])),_:1},8,["isOpen","enterAnimation","leaveAnimation"]))}},T={slot:"start",class:"mail-icon"},U={class:"mail-title"},B={style:{"font-size":"1rem"}},H={style:{"font-size":"0.7rem"}},V={class:"mail-detail"};a("default",{__name:"Mail",setup(a){const i=_(),u=S(),{getImgUrl:b}=M(),w=e(null);return g((async()=>{i.barLoading=!0,await u.getMailList(),i.barLoading=!1})),(a,e)=>(t(),l(r(k),{class:"mail"},{default:n((()=>[r(i).barLoading||!r(u).hasMail?(t(),l(A,{key:0,class:"no-data",desc:a.$t("mail.message.nodata")},null,8,["desc"])):(t(),l(r(x),{key:1},{default:n((()=>[(t(!0),p(v,null,h(r(u).mailList,(a=>(t(),l(r(j),{key:a.id,class:"mail-item",lines:"none",onClick:d((i=>(a=>{w.value.showMail(a)})(a)),["stop"])},{default:n((()=>[o("div",T,[a.isRead?(t(),l(r(f),{key:0,class:"mail-img",src:r(b)("/mail/icon-mail-open.png")},null,8,["src"])):(t(),l(r(f),{key:1,class:"mail-img",src:r(b)("/mail/icon-mail.png")},null,8,["src"])),a.attaches&&0===a.attachesStatus?(t(),l(r(f),{key:2,class:"mail-tag",src:r(b)("/mail/icon-mail-gift.png")},null,8,["src"])):m("",!0)]),s(r(L),{class:"mail-content"},{default:n((()=>[o("div",U,[o("div",B,c(a.title||""),1),o("div",H,c(a.createTime||""),1)]),o("div",V,c(a.content||""),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})),s(N,{ref_key:"mailPopup",ref:w},null,512)])),_:1}))}})}}}));
