import{_ as e,g as l,a as o,u as t,L as s,C as a,E as r,T as n,o as i,c as d,w as u,b as p,n as c,d as g,m,q as h,t as y,k as f,e as b,F as w,y as x,Z as v,z as _,a1 as C,f as L,i as k,v as R,$ as V}from"./index-CFWU6mvY.js";import{_ as B,L as U}from"./LoginFotter.Dz7gmpA2.js";import{L as I}from"./LoginHeader.CAUisgdY.js";import{T}from"./toast.DYv_97IR.js";import{h as N,s as O}from"./show.DQ22mQAi.js";import"./back.DsRJx4W9.js";const P=e({__name:"LoginV2",setup(e){const P=l(),j=o(),S=t(),$=t().theme.loginV2,{t:F}=s();let H=a(0),J=a(!0),z=r({phone:"",otp:""}),G=r({number:"",password:""}),q=a(null),E=a(0),Z=a(F("login.button.send"));const A=e=>{H.value=e,z.otp="",z.phone="",q.value=null,E.value=0,Z.value=F("login.button.send"),G.number="",G.password=""},D=async()=>{if(console.log("获取验证码"),0==E.value){if(""==z.phone)return void T.show(F("login.toast.phone"));T.showLoading("Loading");const{code:e,data:l}=await v({tel:z.phone});T.hideLoading(),200==e&&(E.value=l,M())}},K=()=>{J.value=!J.value},M=()=>{Z.value=E.value+"s",q.value=setInterval((()=>{E.value>0?(E.value--,Z.value=E.value+"s"):(Z.value=F("login.button.otp"),E.value=0,clearInterval(q.value))}),1e3)},Q=()=>{_({url:"/pages/Login/Register"})},W=()=>{P.isChangePassword=1,_({url:"/pages/Login/ForgetPassword"})},X=async()=>{if(0==H.value){if(!G.number)return void T.show(F("login.toast.idOrPhone"));if(!G.password)return void T.show(F("login.toast.password"));T.showLoading("Loading");const e=await P.idPasswordLogin({phoneNumber:G.number,password:G.password});if(T.hideLoading(),!e)return;C({url:"/pages/home/Home"})}if(1==H.value){if(!z.phone)return void T.show(F("login.toast.phone"));if(!z.otp)return void T.show(F("login.toast.oth"));T.showLoading("Loading");const e=await P.optLogin({phoneNumber:z.phone,verifyCode:z.otp});if(T.hideLoading(),!e)return;C({url:"/pages/home/Home"})}};return(e,l)=>{const o=L,t=k,s=R,a=V,r=n("common-layout");return i(),d(r,null,{default:u((()=>[p(o,{class:"login-body",style:c({background:g(S).theme.home.bgColor,backgroundSize:"100% 100%"})},{default:u((()=>[p(o,{style:c({height:g(j).headerStyle.statusBarHeight+"px"})},null,8,["style"]),p(I,{title:e.$t("login.header.title")},null,8,["title"]),p(o,{class:"login-content"},{default:u((()=>[p(o,{class:"flex-scenter"},{default:u((()=>[p(t,{class:"login-logo",src:B,mode:"aspectFit"})])),_:1}),p(o,{class:"login-form"},{default:u((()=>[p(o,{class:"login-form-header",style:c({borderBottomColor:g($).lightGreyBg})},{default:u((()=>[p(s,{class:m(["login-form-header-item",0==g(H)?"active":""]),style:c({color:0==g(H)?g($).tabs.highlight:g($).tabs.normal,borderBottomColor:0==g(H)?g($).inputBorderColor:"none"}),onClick:l[0]||(l[0]=e=>A(0))},{default:u((()=>[h(y(g(F)("login.header.Password")),1)])),_:1},8,["style","class"]),p(s,{class:m(["login-form-header-item",1==g(H)?"active":""]),style:c({color:1==g(H)?g($).tabs.highlight:g($).tabs.normal,borderBottomColor:1==g(H)?g($).inputBorderColor:"none"}),onClick:l[1]||(l[1]=e=>A(1))},{default:u((()=>[h(y(g(F)("login.header.OTP")),1)])),_:1},8,["style","class"])])),_:1},8,["style"]),p(o,{class:"login-form-content"},{default:u((()=>[1==g(H)?(i(),f(w,{key:0},[p(o,{class:"login-form-input-item",style:c({background:g($).inputeItemBg,borderRadius:g($).borderRadius,border:g($).inputItemBorderColor})},{default:u((()=>[p(o,{class:"login-form-input-item-label",style:c({color:""!=g(z).phone?g($).text.labelValue:g($).text.labelNoValue})},{default:u((()=>[h("+91")])),_:1},8,["style"]),p(a,{type:"text",modelValue:g(z).phone,"onUpdate:modelValue":l[2]||(l[2]=e=>g(z).phone=e),maxlength:"10",class:"input-style input-style-width",style:c({color:g($).text.normal}),"placeholder-style":JSON.stringify({color:g($).text.tipTextColor}),placeholder:e.$t("login.placeholder.phone")},null,8,["modelValue","style","placeholder-style","placeholder"])])),_:1},8,["style"]),p(o,{class:"login-form-otp-content m-top"},{default:u((()=>[p(o,{style:c({width:0==g($).isRedUl?"405rpx":"444rpx"})},{default:u((()=>[p(o,{class:"login-form-input-item",style:c({background:g($).inputeItemBg,borderRadius:g($).borderRadius,border:g($).inputItemBorderColor})},{default:u((()=>[1==g($).isRedUl?(i(),d(o,{key:0,class:"login-form-input-item-label",style:c({color:""!=g(z).otp?g($).text.labelValue:g($).text.labelNoValue})},{default:u((()=>[h(y(g(F)("login.button.otp")),1)])),_:1},8,["style"])):b("",!0),p(a,{type:"text",modelValue:g(z).otp,"onUpdate:modelValue":l[3]||(l[3]=e=>g(z).otp=e),class:m(["input-style input-style-width",0==g($).isRedUl?"input-style-red-width":"input-style-width"]),style:c({color:g($).text.normal,paddingLeft:0==g($).isRedUl?"46rpx":"0"}),"placeholder-style":JSON.stringify({color:g($).text.tipTextColor}),placeholder:e.$t("login.placeholder.loginOtp")},null,8,["modelValue","style","class","placeholder-style","placeholder"])])),_:1},8,["style"])])),_:1},8,["style"]),p(o,{class:"get-otp-btn",style:c({background:g($).intervalBg,color:g($).text.btnTextColor,borderRadius:g($).borderRadius,width:0==g($).isRedUl?"276rpx":"185rpx"}),onClick:D},{default:u((()=>[h(y(g(Z)),1)])),_:1},8,["style"])])),_:1})],64)):b("",!0),0==g(H)?(i(),f(w,{key:1},[p(o,{class:"login-form-input-item",style:c({background:g($).inputeItemBg,borderRadius:g($).borderRadius,border:g($).inputItemBorderColor})},{default:u((()=>[p(a,{type:"text",modelValue:g(G).number,"onUpdate:modelValue":l[4]||(l[4]=e=>g(G).number=e),class:m(["input-style",0==g($).isRedUl?"input-style-red-width1":"input-style-width1"]),style:c({color:g($).text.normal,paddingLeft:0==g($).isRedUl?"46rpx":"0"}),"placeholder-style":JSON.stringify({color:g($).text.tipTextColor}),placeholder:e.$t("login.placeholder.passwordLogin")},null,8,["modelValue","style","class","placeholder-style","placeholder"])])),_:1},8,["style"]),p(o,{class:"login-form-otp-content m-top"},{default:u((()=>[p(o,{class:"login-form-input-item",style:c({background:g($).inputeItemBg,borderRadius:g($).borderRadius,border:g($).inputItemBorderColor})},{default:u((()=>[p(a,{type:g(J)?"password":"text",modelValue:g(G).password,"onUpdate:modelValue":l[5]||(l[5]=e=>g(G).password=e),class:"input-style input-style-width1",style:c({color:g($).text.normal,paddingLeft:0==g($).isRedUl?"46rpx":"0"}),"placeholder-style":JSON.stringify({color:g($).text.tipTextColor}),placeholder:e.$t("login.placeholder.password")},null,8,["type","modelValue","style","placeholder-style","placeholder"]),p(t,{src:g(J)?g(N):g(O).png,mode:"scaleToFill",onClick:K,class:"suffix-size"},null,8,["src"])])),_:1},8,["style"])])),_:1})],64)):b("",!0),p(o,{class:"btn-text-list",style:c({color:g($).text.normal})},{default:u((()=>[p(s,{onClick:Q},{default:u((()=>[h(y(g(F)("login.button.register")),1)])),_:1}),p(s,{onClick:W},{default:u((()=>[h(y(g(F)("login.button.forgetPassword")),1)])),_:1})])),_:1},8,["style"]),p(o,{class:"submit",onClick:x(X,["stop"]),style:c({background:g(S).theme.button.linearGolden,color:g(S).theme.button.linearGoldenText})},{default:u((()=>[h(y(g(F)("login.button.submit")),1)])),_:1},8,["style"])])),_:1})])),_:1}),p(U)])),_:1})])),_:1},8,["style"])])),_:1})}}},[["__scopeId","data-v-13702628"]]);export{P as default};
