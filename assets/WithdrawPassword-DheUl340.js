import{u as $}from"./vue-i18n-CPl1SEIs.js";import{R as p,d as b,W as g,K as v,q as R,Q as x,h as S,t as c}from"./@ionic-CQtneEHh.js";import{c as U,e as B,u as O,o as T}from"./index-DbfdoCpI.js";import{s as N}from"./withdraw-CqqmClu1.js";import{j as M,r as I,H as W,I as q,J as r,C as s,M as l,P as w,E as a,O as _}from"./@vue-KvDcA5L4.js";import"./@intlify-BAcCFw_v.js";import"./@stencil-DBaMOtEh.js";import"./@capacitor-BXp5o1ZG.js";import"./vue-router-D1p6pxpQ.js";import"./ionicons-T4lv_k6t.js";import"./localforage-qzmIiYbH.js";import"./@adjustcom-Dev-Q0DI.js";import"./pinia-7EZHWT0u.js";import"./pinia-plugin-persistedstate-2-DcGv4gw_.js";import"./@awesome-cordova-plugins-CT7d7gQP.js";import"./rxjs-C3tg6S9t.js";import"./tslib-BHBn2Msb.js";const D={style:{margin:"4px 0"}},L={class:"block-title"},j={style:{margin:"4px 0"}},A={class:"block-title"},E={style:{margin:"4px 0"}},F={class:"block-title"},G={class:"input-prefix",slot:"start"},H=l("br",null,null,-1),J=l("span",{class:"input-prefix",slot:"start"},"OTP",-1),ut={__name:"WithdrawPassword",setup(K){const{t:i}=$(),h=U(),m=B(),{getImgUrl:f}=O(),t=M({withdrawPasswd:"",withdrawPasswdRepeat:"",mobile:m.userInfo.mobile?m.userInfo.mobile.substring(2):"",verificationCode:"",canModifyPwd:!m.userInfo.mobile});let P;const V="+92",n=I(0),u=I(i("account.button.otp")),C=async()=>{if(n.value==0){if(!t.mobile||t.mobile.length==0){await(await c.create({message:i("account.withdrawalPassword.toast.phone"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}const e=await T({tel:t.mobile});e.state=="200"&&(n.value=e.resultData,y())}},y=()=>{u.value="".concat(n.value,"s"),P=setInterval(()=>{n.value>0?(n.value--,u.value="".concat(n.value,"s")):(u.value=i("account.button.otp"),n.value=0,clearInterval(P))},1e3)},k=async()=>{if(!t.withdrawPasswd||t.withdrawPasswd.length==0){await(await c.create({message:i("account.withdrawalPassword.toast.withdrawPasswd"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}if(t.withdrawPasswd!==t.withdrawPasswdRepeat){await(await c.create({message:i("account.withdrawalPassword.toast.withdrawPasswdRepeat"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}if(!t.mobile||t.mobile.length==0){await(await c.create({message:i("account.withdrawalPassword.toast.phone"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}if(!t.verificationCode||t.verificationCode.length==0){await(await c.create({message:i("account.withdrawalPassword.toast.verificationCode"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}h.fullLoading=!0,(await N({withdrawPasswd:t.withdrawPasswd,withdrawPasswdRepeat:t.withdrawPasswdRepeat,mobile:t.canModifyPwd?t.mobile:null,verificationCode:t.verificationCode})).state=="200"&&(await(await c.create({message:"Success",duration:1500,position:"top",translucent:!0,icon:checkmarkOutline,color:"success"})).present(),setTimeout(()=>router.go(-1),1e3)),h.fullLoading=!1};return(e,o)=>(W(),q(a(S),{class:"withdraw-password"},{default:r(()=>[s(a(R),null,{default:r(()=>[l("div",D,[l("div",L,w(e.$t("account.withdrawalPassword.label.password")),1),s(a(p),{modelValue:t.withdrawPasswd,"onUpdate:modelValue":o[0]||(o[0]=d=>t.withdrawPasswd=d),type:"password",placeholder:e.$t("account.withdrawalPassword.label.password")},{default:r(()=>[s(a(b),{class:"input-prefix",slot:"start",src:a(f)("/account/w-password.png")},null,8,["src"]),s(a(g),{slot:"end",color:"medium"})]),_:1},8,["modelValue","placeholder"])]),l("div",j,[l("div",A,w(e.$t("account.withdrawalPassword.label.repeatPassword")),1),s(a(p),{modelValue:t.withdrawPasswdRepeat,"onUpdate:modelValue":o[1]||(o[1]=d=>t.withdrawPasswdRepeat=d),type:"password",placeholder:e.$t("account.withdrawalPassword.label.repeatPassword")},{default:r(()=>[s(a(b),{class:"input-prefix",slot:"start",src:a(f)("/account/w-password.png")},null,8,["src"]),s(a(g),{slot:"end",color:"medium"})]),_:1},8,["modelValue","placeholder"])]),l("div",E,[l("div",F,w(e.$t("account.withdrawalPassword.label.phone")),1),s(a(p),{modelValue:t.mobile,"onUpdate:modelValue":o[2]||(o[2]=d=>t.mobile=d),placeholder:e.$t("account.withdrawalPassword.label.phone")},{default:r(()=>[l("span",G,w(a(V)),1)]),_:1},8,["modelValue","placeholder"]),H,s(a(p),{modelValue:t.verificationCode,"onUpdate:modelValue":o[3]||(o[3]=d=>t.verificationCode=d),placeholder:e.$t("account.withdrawalPassword.label.otpPlaceholder")},{default:r(()=>[J,s(a(v),{slot:"end",class:"btn-otp",style:{color:"#c5000f"},onClick:C},{default:r(()=>[_(w(u.value),1)]),_:1})]),_:1},8,["modelValue","placeholder"])])]),_:1}),s(a(x),null,{default:r(()=>[s(a(v),{class:"btn-confirm",expand:"block",shape:"round",onClick:k},{default:r(()=>[_(w(e.$t("account.button.confirm")),1)]),_:1})]),_:1})]),_:1}))}};export{ut as default};
