System.register(["./@vue-legacy-D6coodBY.js","./@ionic-legacy-CdgF_T6b.js","./index-legacy-BwlOYC70.js","./useMailStore-legacy-Dd-R1xlD.js","./vue-i18n-legacy-Dfssw_XK.js","./@stencil-legacy-B3F1rWbF.js","./@capacitor-legacy-DN4LNBqm.js","./vue-router-legacy-f55MWKZg.js","./localforage-legacy-D0pVUvDl.js","./@adjustcom-legacy-QP0zxLxB.js","./pinia-legacy-C_Ccd9rn.js","./pinia-plugin-persistedstate-2-legacy-CtlOhiZd.js","./@awesome-cordova-plugins-legacy-CuOL20OL.js","./rxjs-legacy-C12cs3ed.js","./tslib-legacy-BRpw1qYg.js","./@intlify-legacy-DDHA1rkh.js"],(function(a,i){"use strict";var e,t,l,n,s,o,r,c,p,m,d,u,g,h,f,v,b,w,y,x,k,j,L,_,M,S,$,z,C,T;return{setters:[a=>{e=a.r,t=a.G,l=a.H,n=a.I,s=a.L,o=a.B,r=a.D,c=a.O,p=a.J,m=a.P,d=a.S,u=a.N,g=a.A,h=a.K,f=a.F},a=>{v=a.d,b=a.K,w=a.O,y=a.t,x=a.L,k=a.h,j=a.M,L=a.E},a=>{_=a.u},a=>{M=a.u,S=a.r,$=a.a,z=a.d,C=a._},a=>{T=a.u},null,null,null,null,null,null,null,null,null,null,null],execute:function(){var i=document.createElement("style");i.textContent=".mail-popup{--background: var(--ion-background-light-color);--width: 88vw;--height: fit-content;--box-shadow: 0 28px 48px rgba(0, 0, 0, .4);--border-radius: 6px}.mail-popup .wrapper{margin:16px 8px;padding:0 12px;height:fit-content}.mail-popup .wrapper ion-img.btn-close{width:32px;height:32px;position:absolute;top:0;right:0}.mail-popup .wrapper .mail-title{text-align:center;margin-bottom:24px}.mail-popup .wrapper .mail-sub-title{position:relative;display:flex;align-items:center;justify-content:space-between;width:100%}.mail-popup .wrapper .mail-content{height:20vh;background:var(--ion-background-color);border-radius:6px;font-size:.8rem;color:#fff;line-height:24px;white-space:pre-wrap;padding:8px 12px;margin:16px 0;overflow-y:scroll}.mail-popup .wrapper .mail-attaches{position:relative;left:50%;transform:translate(-50%);width:80%;display:flex;align-items:center;justify-content:space-around;background:var(--ion-background-color);border-radius:6px;color:#fff;padding:8px 12px;margin:12px 0 24px}.mail-popup .wrapper ion-button{position:relative;left:50%;transform:translate(-50%);width:40%;color:#fff}.mail-popup .wrapper ion-button.btn-confirm{--background: linear-gradient(90deg, #f78d22, #e34e04);--background-activated: linear-gradient(45deg, #f78d22, #e34e04)}.mail-popup .wrapper ion-button.btn-del{--background: linear-gradient(0deg, #32b12f 0%, #10740b 100%);--background-activated: linear-gradient(30deg, #32b12f 0%, #10740b 100%)}.mail{position:relative}.mail .mail-item{position:relative;height:10vh;min-height:68px;margin-bottom:12px;border-radius:8px}.mail .mail-item::part(native){position:relative;height:100%}.mail .mail-item .mail-icon{position:relative;background:var(--ion-background-color);height:80%;aspect-ratio:1/1;padding:12px;margin-right:4px;border-radius:8px}.mail .mail-item .mail-icon ion-img{position:absolute}.mail .mail-item .mail-icon ion-img.mail-img{width:50%;top:50%;left:50%;transform:translate(-50%,-50%)}.mail .mail-item .mail-icon ion-img.mail-tag{width:40%;bottom:0;right:0}.mail .mail-item .mail-content{position:relative;width:100%;height:100%;padding:12px 8px;overflow:hidden}.mail .mail-item .mail-content .mail-title{position:relative;display:flex;align-items:center;justify-content:space-between;width:100%;height:20%}.mail .mail-item .mail-content .mail-title>div:first-child{width:55%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.mail .mail-item .mail-content .mail-detail{color:#fa8484;font-size:.8rem;margin:8px 2px;text-align:justify;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}.mail .no-data{position:relative;top:10vh}\n",document.head.appendChild(i);const O={class:"wrapper"},D={class:"mail-title"},I={class:"mail-sub-title"},P={style:{"font-size":"0.9rem"}},R={style:{"font-size":"0.7rem",color:"#FD5959"}},E={class:"mail-content"},F={key:0,class:"mail-attaches"},J={__name:"MailPopup",setup(a,{expose:i}){const{t:g}=T(),h=_(),f=M(),x="/testTestTest/",k=e(!1),j=e({}),L=async()=>{h.barLoading=!0;const a=await $({mailId:j.value.id});if("200"===a.state){await f.getMailList(),h.barLoading=!1,k.value=!1,j.value.attachesStatus=1;const a=await y.create({message:g("mail.message.receiveSuccess"),duration:1500,position:"top",color:"success",translucent:!0});await a.present()}else{h.barLoading=!1;const i=await y.create({message:a.msg,duration:1500,position:"top",color:"danger",translucent:!0});await i.present()}},C=async()=>{h.barLoading=!0;const a=await z({mailId:j.value.id});if("200"===a.state){await f.getMailList(),h.barLoading=!1,k.value=!1;const a=await y.create({message:g("mail.message.deleteSuccess"),duration:1500,position:"top",color:"success",translucent:!0});await a.present()}else{const i=await y.create({message:a.msg,duration:1500,position:"top",color:"danger",translucent:!0});await i.present(),h.barLoading=!1}};return i({showMail:async a=>{if(h.barLoading=!0,0==a.isRead){const i=await S({mailId:a.id});if("200"===i.state)a.isRead=1;else{const a=await y.create({message:i.msg,duration:1500,position:"top",color:"danger",translucent:!0});await a.present()}}j.value=a,h.barLoading=!1,k.value=!0}}),(a,i)=>(t(),l(r(w),{class:"mail-popup",isOpen:k.value,onDidDismiss:i[1]||(i[1]=a=>k.value=!1)},{default:n((()=>[s("div",O,[o(r(v),{class:"btn-close",src:`${r(x)}mail/icon-popup-close.png`,onClick:i[0]||(i[0]=a=>k.value=!1)},null,8,["src"]),s("h3",D,c(j.value.title||""),1),s("div",I,[s("div",P,c(a.$t("mail.dearPlayer"))+":",1),s("div",R,c(j.value.createTime||""),1)]),s("div",E,c(j.value.content||""),1),j.value.attaches&&0===j.value.attachesStatus?(t(),p("div",F,[o(r(v),{src:`${r(x)}mail/icon-coin.png`,style:{width:"35px",height:"35px"}},null,8,["src"]),s("div",null,c(Math.round(100*JSON.parse(j.value.attaches).amount)/100),1)])):m("",!0),j.value.attaches&&0===j.value.attachesStatus?(t(),l(r(b),{key:1,class:"btn-confirm ion-text-capitalize",fill:"solid",shape:"round",onClick:d(L,["stop"])},{default:n((()=>[u(c(a.$t("mail.button.confirm")),1)])),_:1})):(t(),l(r(b),{key:2,class:"btn-del ion-text-capitalize",fill:"solid",shape:"round",onClick:d(C,["stop"])},{default:n((()=>[u(c(a.$t("mail.button.delete")),1)])),_:1}))])])),_:1},8,["isOpen"]))}},K={slot:"start",class:"mail-icon"},N={class:"mail-title"},A={style:{"font-size":"1rem"}},B={style:{"font-size":"0.7rem"}},G={class:"mail-detail"};a("default",{__name:"Mail",setup(a){const i=_(),u=M(),b="/testTestTest/",w=e(null);return g((async()=>{i.barLoading=!0,await u.getMailList(),i.barLoading=!1})),(a,i)=>(t(),l(r(k),{class:"mail"},{default:n((()=>[r(u).hasMail?(t(),l(r(x),{key:0},{default:n((()=>[(t(!0),p(f,null,h(r(u).mailList,(a=>(t(),l(r(j),{key:a.id,class:"mail-item",lines:"none",onClick:d((i=>(a=>{w.value.showMail(a)})(a)),["stop"])},{default:n((()=>[s("div",K,[a.isRead?(t(),l(r(v),{key:0,class:"mail-img",src:`${r(b)}mail/icon-mail-open.png`},null,8,["src"])):(t(),l(r(v),{key:1,class:"mail-img",src:`${r(b)}mail/icon-mail.png`},null,8,["src"])),a.attaches&&0===a.attachesStatus?(t(),l(r(v),{key:2,class:"mail-tag",src:`${r(b)}mail/icon-mail-gift.png`},null,8,["src"])):m("",!0)]),o(r(L),{class:"mail-content"},{default:n((()=>[s("div",N,[s("div",A,c(a.title||""),1),s("div",B,c(a.createTime||""),1)]),s("div",G,c(a.content||""),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):(t(),l(C,{key:1,class:"no-data",desc:a.$t("mail.message.nodata")},null,8,["desc"])),o(J,{ref_key:"mailPopup",ref:w},null,512)])),_:1}))}})}}}));
