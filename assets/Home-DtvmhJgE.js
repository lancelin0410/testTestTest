import{d as h,t as z,x as B,y as U,z as D,h as N,A as R,B as q,C as E,D as x,i as O,o as W}from"./@ionic-DW2CtbHZ.js";import{g as J,a as Q,b as X,u as P,c as Y,s as Z,d as ee,e as te,f as ae,h as se}from"./index-BA_uPNhW.js";import{_ as oe}from"./Marquee-m0KnaMAi.js";import{_ as ne}from"./UserInfo-D8MKIwZC.js";import{r as L,c as re,G as t,J as G,L as $,B as s,D as e,H as d,P as k,S as K,U as ie,O as b,A as M,j as V,I as o,F as C,K as T,M as le,N as F,V as ce,W as me}from"./@vue-CTzZmrEY.js";import{b as ue}from"./vue-router-D889LiZM.js";import{d as ge}from"./pinia-DKQUv1OW.js";import{_ as de,u as fe}from"./useMailStore-I-37QJSi.js";import{S as pe,A as ye,P as ve,a as he}from"./swiper-Ba4ICoCD.js";import"./@stencil-DBaMOtEh.js";import"./@capacitor-UngXGu7w.js";import"./localforage-qzmIiYbH.js";import"./@adjustcom-Dev-Q0DI.js";import"./vue-i18n-DnF4oqIJ.js";import"./@intlify-BAcCFw_v.js";import"./pinia-plugin-persistedstate-2-DcGv4gw_.js";import"./@awesome-cordova-plugins-CT7d7gQP.js";import"./rxjs-C3tg6S9t.js";import"./tslib-BHBn2Msb.js";const j=ge("game",()=>{const f=L([]),g=async()=>{const l=await J();l.state==="200"&&(f.value=l.resultData||[])},a=L([]),v=async()=>{const l=await Q();l.state==="200"&&(a.value=l.resultData||[])},i=L([]),p=L([]),_=L([]),w=L([]);return{favoriteGameList:f,getFavoriteGames:g,recentGameList:a,getRecentGames:v,recentSearches:i,popularSearches:p,hotGameList:_,recommendGameList:w,getGameSearchData:async()=>{const l=await X();return l.state,code===200&&l&&(i.value=l.resultData.recentSearches||[],p.value=l.resultData.popularSearches||[],a.value=l.resultData.recentGameList||[],_.value=l.resultData.hotGameList||[],w.value=l.resultData.recommendGameList||[]),!0}}},{persistedState:{persist:!1}}),_e={key:0,class:"game-name"},H={__name:"GameItem",props:{game:{type:Object,require:!0}},setup(f){const g="/",a=f,v=ue(),i=P(),p=j(),_=async()=>{if(a.game.iconType!=2){i.fullLoading=!0;const l=a.game.gameId||a.game.id,c=await Y({gameId:l});if(c.state==="200"){const n=Capacitor.convertFileSrc(c.resultData);await p.getRecentGames(),v.push({name:"GameWeb",query:{gameId:l,url:encodeURIComponent(n)}})}else await(await z.create({message:c.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present();i.fullLoading=!1}},w=re(()=>p.favoriteGameList.filter(c=>c.gameId==a.game.gameId||c.gameId==a.game.id).length>0),I=async()=>{if(a.game.iconType!=2){i.fullLoading=!0;const l=a.game.gameId||a.game.id,c=await Z({gameId:l,opt:w.value?2:1});c.state==="200"?p.getFavoriteGames():await(await z.create({message:c.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present(),i.fullLoading=!1}};return(l,c)=>(t(),G("div",{class:"game-item",onClick:K(_,["stop"])},[$("div",{class:ie(["game-image",{large:f.game.imageSize==2}])},[s(e(h),{class:"game-icon",src:f.game.imageUrl},null,8,["src"]),f.game.cornerMark==1?(t(),d(e(h),{key:0,class:"game-tag",src:"".concat(e(g),"home/icon-new.png")},null,8,["src"])):k("",!0),f.game.cornerMark==2?(t(),d(e(h),{key:1,class:"game-tag",src:"".concat(e(g),"home/icon-best.png")},null,8,["src"])):k("",!0),f.game.iconType!=2?(t(),G("div",{key:2,class:"game-collect",onClick:K(I,["stop"])},[w.value?(t(),d(e(h),{key:0,src:"".concat(e(g),"home/icon-collection-select.png"),style:{width:"24px",height:"24px"}},null,8,["src"])):(t(),d(e(h),{key:1,src:"".concat(e(g),"home/icon-collection-normal.png"),style:{width:"24px",height:"24px"}},null,8,["src"]))])):k("",!0)],2),f.game.imageSize!=2?(t(),G("div",_e,b(f.game.name),1)):k("",!0)]))}},Le=["onClick"],Ge={__name:"GameList",setup(f){const g=L(1),a=L([]);let v=!1;M(async()=>await w());const i=V({}),p=V({}),_=n=>{const m=new Image;m.src=n},w=async()=>{const n=await ee();if(n.state==="200"){a.value=n.resultData.labelList||[],g.value=Number(a.value[0].labelId);const m=n.resultData.firstLabelGameList,u=n.resultData.categoryList;a.value[0].gameList=n.resultData.gameAndCategoryList.map(r=>{if(r.iconType==1){const y=m.filter(S=>S.status&&S.gameId==r.id);r.name=y.length>0?y[0].gameName:""}if(r.iconType==2){const y=u.filter(S=>S.categoryId==r.id);r.name=y.length>0?y[0].categoryName:""}return r});for(const[r,y]of a.value.entries())_(y.imageUrlSelected),_(y.imageUrlUnselected),r>0&&(y.gameList=await I(y.labelId)),y.gameList&&y.gameList.forEach(S=>_(S.imageUrl))}else await(await z.create({message:n.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present()},I=async n=>{const m=await te({labelId:n});if(m.state==="200"){const u=m.resultData.gameList.filter(r=>r.status)||[];return m.resultData.gameAndCategoryList.map(r=>{const y=u.filter(S=>S.status&&S.gameId==r.id);return r.name=y.length>0?y[0].gameName:"",r}).filter(r=>r.imageUrl)}else return await(await z.create({message:m.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present(),[]},l=n=>{v=!0,g.value=Number(n),i[n].$el.scrollIntoView({behavior:"smooth"})},c=n=>{if(v){const m=i[g.value].$el.offsetTop,u=m+i[g.value].$el.offsetHeight;m<=n.target.scrollTop&&n.target.scrollTop<=u&&(v=!1)}else for(const m in i)i[m].$el.offsetTop<=n.target.scrollTop&&(g.value=Number(m),p[m].scrollIntoView())};return(n,m)=>(t(),d(e(N),{class:"game-list"},{default:o(()=>[s(e(B),null,{default:o(()=>[s(e(U),{class:"ion-justify-content-start"},{default:o(()=>[s(e(D),{class:"game-menu",size:"2.2"},{default:o(()=>[(t(!0),G(C,null,T(a.value,u=>(t(),G("div",{ref_for:!0,ref:r=>p[u.labelId]=r,key:u.labelId,class:"game-label",onClick:r=>l(u.labelId)},[s(le,{name:"fade"},{default:o(()=>[g.value==Number(u.labelId)?(t(),d(e(h),{key:0,src:u.imageUrlSelected,class:"game-img"},null,8,["src"])):(t(),d(e(h),{key:1,src:u.imageUrlUnselected,class:"game-img"},null,8,["src"]))]),_:2},1024)],8,Le))),128))]),_:1}),s(e(D),{size:"9.8",class:"games",onScroll:c},{default:o(()=>[(t(!0),G(C,null,T(a.value,u=>(t(),d(e(U),{ref_for:!0,ref:r=>i[u.labelId]=r,key:u.labelId},{default:o(()=>[(t(!0),G(C,null,T(u.gameList,r=>(t(),d(e(D),{size:r.imageSize==2?12:r.imageSize==3?8:4},{default:o(()=>[s(H,{game:r},null,8,["game"])]),_:2},1032,["size"]))),256))]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}))}},A={__name:"GameSub",props:{gameKey:{type:String,require:!0}},setup(f){const g=f,a=j(),v=i=>{const p=new Image;p.src=i};return M(async()=>{g.gameKey=="recentGameList"&&await a.getRecentGames(),g.gameKey=="favoriteGameList"&&await a.getFavoriteGames(),a[g.gameKey].forEach(i=>v(i.imageUrl))}),(i,p)=>(t(),d(e(N),{class:"game-sub"},{default:o(()=>[e(a)[f.gameKey].length>0?(t(),d(e(B),{key:0},{default:o(()=>[s(e(U),{class:"ion-justify-content-start"},{default:o(()=>[(t(!0),G(C,null,T(e(a)[f.gameKey],_=>(t(),d(e(D),{size:"3"},{default:o(()=>[s(H,{game:_},null,8,["game"])]),_:2},1024))),256))]),_:1})]),_:1})):(t(),d(de,{key:1,class:"no-data"}))]),_:1}))}},we={key:0,class:"activity-icon"},Se={class:"activity-icon"},Ie={class:"item-button"},be={class:"item-button"},qe={__name:"Home",setup(f){const g=P(),a=fe(),v=ae(),i="/",p=L("GameList"),_={GameList:Ge,GameRecent:A,GameFavorite:A},w={GameList:null,GameRecent:"recentGameList",GameFavorite:"favoriteGameList"},I=L([]),l=async()=>{const c=await se();c.state==="200"?I.value=c.resultData.bannerList||[]:await(await z.create({message:c.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present()};return M(async()=>{await l(),await a.getMailList()}),(c,n)=>(t(),d(e(N),{class:"home"},{default:o(()=>[s(e(O),null,{default:o(()=>[s(e(B),{style:{padding:"0"}},{default:o(()=>[s(e(U),{class:"ion-justify-content-between"},{default:o(()=>[s(e(D),{size:"6"},{default:o(()=>[s(e(h),{src:e(g).imgLogo.headerLogo,style:{width:"100%",margin:"auto"}},null,8,["src"])]),_:1}),s(e(D),{size:"auto",style:{display:"flex"}},{default:o(()=>[e(v).isShowTurnplate?(t(),G("div",we,[s(e(h),{src:"".concat(e(i),"home/icon-home-game.png")},null,8,["src"]),e(v).turnplate.totalRemainTimes>0?(t(),d(e(R),{key:0,'"':"",class:"activity-icon-tag"},{default:o(()=>[F(b(e(v).turnplate.totalRemainTimes||10),1)]),_:1})):k("",!0)])):k("",!0),$("div",Se,[s(e(h),{src:"".concat(e(i),"home/icon-mail.png"),"router-link":"/account/mail"},null,8,["src"]),e(a).hasUnread?(t(),d(e(R),{key:0,class:"activity-icon-tag"})):k("",!0)])]),_:1})]),_:1})]),_:1}),s(e(pe),{modules:[e(ye),e(ve),e(q)],centeredSlides:!0,pagination:{clickable:!0},autoplay:{delay:3e3},loop:!0,lazyPreloadPrevNext:1},{default:o(()=>[(t(!0),G(C,null,T(I.value,(m,u)=>(t(),d(e(he),{key:"banner_".concat(u)},{default:o(()=>[s(e(h),{src:m.imageUrl,loading:"lazy"},null,8,["src"])]),_:2},1024))),128))]),_:1},8,["modules"]),s(oe),s(ne,{class:"user-info"},{default:o(()=>[$("div",Ie,[s(e(h),{src:"".concat(e(i),"home/icon-deposit.png"),style:{height:"100%","margin-bottom":"5px"}},null,8,["src"]),$("div",null,b(c.$t("home.deposit")),1)]),$("div",be,[s(e(h),{src:"".concat(e(i),"home/icon-withdraw.png"),style:{height:"100%","margin-bottom":"5px"}},null,8,["src"]),$("div",null,b(c.$t("home.withdraw")),1)])]),_:1}),s(e(E),{modelValue:p.value,"onUpdate:modelValue":n[0]||(n[0]=m=>p.value=m),mode:"md"},{default:o(()=>[s(e(x),{class:"ion-text-capitalize",value:"GameList"},{default:o(()=>[F(b(c.$t("home.allgames")),1)]),_:1}),s(e(x),{class:"ion-text-capitalize",value:"GameRecent"},{default:o(()=>[F(b(c.$t("home.recent")),1)]),_:1}),s(e(x),{class:"ion-text-capitalize",value:"GameFavorite"},{default:o(()=>[F(b(c.$t("home.favorite")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(e(W),null,{default:o(()=>[(t(),d(ce,{exclude:"GameSub"},[(t(),d(me(_[p.value]),{class:"bottom-view",gameKey:w[p.value]},null,8,["gameKey"]))],1024))]),_:1})]),_:1}))}};export{qe as default};
