import{d as _,t as $,x as M,y as F,z as C,h as R,A,B as W,C as J,D as N,i as Q,o as X}from"./@ionic-Dolm7zi0.js";import{g as Y,a as Z,b as ee,c as B,u as q,d as te,s as ae,e as se,f as oe,h as K,i as ne,j as re}from"./index-DQ4HubQi.js";import{_ as ie}from"./Marquee-BAUTu_TS.js";import{_ as le}from"./UserInfo-DhQF5pQi.js";import{r as w,c as ce,G as t,J as S,L as U,B as s,D as e,H as d,P as k,S as P,U as me,O as b,A as V,j,I as o,F as x,K as T,M as ue,N as z,V as ge,W as de}from"./@vue-CTzZmrEY.js";import{b as fe}from"./vue-router-D889LiZM.js";import{d as pe}from"./pinia-DKQUv1OW.js";import{_ as ye,u as ve}from"./useMailStore-CW3QYtad.js";import{S as he,A as Le,P as _e,a as Ge}from"./swiper-Ba4ICoCD.js";import"./@stencil-DBaMOtEh.js";import"./@capacitor-BXp5o1ZG.js";import"./localforage-qzmIiYbH.js";import"./@adjustcom-Dev-Q0DI.js";import"./vue-i18n-DnF4oqIJ.js";import"./@intlify-BAcCFw_v.js";import"./pinia-plugin-persistedstate-2-DcGv4gw_.js";import"./@awesome-cordova-plugins-CT7d7gQP.js";import"./rxjs-C3tg6S9t.js";import"./tslib-BHBn2Msb.js";const O=pe("game",()=>{const f=w([]),h=async()=>{const n=await Y();n.state==="200"&&(f.value=n.resultData||[])},r=w([]),c=async()=>{const n=await Z();n.state==="200"&&(r.value=n.resultData||[])},i=w([]),v=w([]),m=w([]),G=w([]);return{favoriteGameList:f,getFavoriteGames:h,recentGameList:r,getRecentGames:c,recentSearches:i,popularSearches:v,hotGameList:m,recommendGameList:G,getGameSearchData:async()=>{const n=await ee();return n.state,code===200&&n&&(i.value=n.resultData.recentSearches||[],v.value=n.resultData.popularSearches||[],r.value=n.resultData.recentGameList||[],m.value=n.resultData.hotGameList||[],G.value=n.resultData.recommendGameList||[]),!0}}},{persistedState:{persist:!1}}),we={key:0,class:"game-name"},E={__name:"GameItem",props:{game:{type:Object,require:!0}},setup(f){const{getPublicUrl:h}=q(),r=f,c=fe(),i=B(),v=O(),m=async()=>{if(r.game.iconType!=2){i.fullLoading=!0;const n=r.game.gameId||r.game.id,L=await te({gameId:n});if(L.state==="200"){const p=Capacitor.convertFileSrc(L.resultData);await v.getRecentGames(),c.push({name:"GameWeb",query:{gameId:n,url:encodeURIComponent(p)}})}else await(await $.create({message:L.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present();i.fullLoading=!1}},G=ce(()=>v.favoriteGameList.filter(L=>L.gameId==r.game.gameId||L.gameId==r.game.id).length>0),D=async()=>{if(r.game.iconType!=2){i.fullLoading=!0;const n=r.game.gameId||r.game.id,L=await ae({gameId:n,opt:G.value?2:1});L.state==="200"?v.getFavoriteGames():await(await $.create({message:L.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present(),i.fullLoading=!1}};return(n,L)=>(t(),S("div",{class:"game-item",onClick:P(m,["stop"])},[U("div",{class:me(["game-image",{large:f.game.imageSize==2}])},[s(e(_),{class:"game-icon",src:f.game.imageUrl},null,8,["src"]),f.game.cornerMark==1?(t(),d(e(_),{key:0,class:"game-tag",src:e(h)("/home/icon-new.png")},null,8,["src"])):k("",!0),f.game.cornerMark==2?(t(),d(e(_),{key:1,class:"game-tag",src:e(h)("/home/icon-best.png")},null,8,["src"])):k("",!0),f.game.iconType!=2?(t(),S("div",{key:2,class:"game-collect",onClick:P(D,["stop"])},[G.value?(t(),d(e(_),{key:0,src:e(h)("/home/icon-collection-select.png"),style:{width:"24px",height:"24px"}},null,8,["src"])):(t(),d(e(_),{key:1,src:e(h)("/home/icon-collection-normal.png"),style:{width:"24px",height:"24px"}},null,8,["src"]))])):k("",!0)],2),f.game.imageSize!=2?(t(),S("div",we,b(f.game.name),1)):k("",!0)]))}},Se=["onClick"],Ie={__name:"GameList",setup(f){const h=B(),{preLoadImg:r}=K(),c=w(1),i=w([]);let v=!1;V(async()=>await D());const m=j({}),G=j({}),D=async()=>{const l=await se();if(l.state==="200"){i.value=l.resultData.labelList||[],c.value=Number(i.value[0].labelId);const g=l.resultData.firstLabelGameList,u=l.resultData.categoryList;i.value[0].gameList=l.resultData.gameAndCategoryList.map(a=>{if(a.iconType==1){const y=g.filter(I=>I.status&&I.gameId==a.id);a.name=y.length>0?y[0].gameName:""}if(a.iconType==2){const y=u.filter(I=>I.categoryId==a.id);a.name=y.length>0?y[0].categoryName:""}return a});for(const[a,y]of i.value[0].gameList.entries())a<=12&&await r(y.imageUrl);h.startLoading=!1;for(const[a,y]of i.value.entries())r(y.imageUrlSelected),r(y.imageUrlUnselected),a>0&&(y.gameList=await n(y.labelId),y.gameList.forEach(I=>r(I.imageUrl)))}else await(await $.create({message:l.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present()},n=async l=>{const g=await oe({labelId:l});if(g.state==="200"){const u=g.resultData.gameList.filter(a=>a.status)||[];return g.resultData.gameAndCategoryList.map(a=>{const y=u.filter(I=>I.status&&I.gameId==a.id);return a.name=y.length>0?y[0].gameName:"",a}).filter(a=>a.imageUrl)}else return await(await $.create({message:g.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present(),[]},L=l=>{v=!0,c.value=Number(l),m[l].$el.scrollIntoView({behavior:"smooth"})},p=l=>{if(v){const g=m[c.value].$el.offsetTop,u=g+m[c.value].$el.offsetHeight;g<=l.target.scrollTop&&l.target.scrollTop<=u&&(v=!1)}else for(const g in m)m[g].$el.offsetTop<=l.target.scrollTop&&(c.value=Number(g),G[g].scrollIntoView())};return(l,g)=>(t(),d(e(R),{class:"game-list"},{default:o(()=>[s(e(M),null,{default:o(()=>[s(e(F),{class:"ion-justify-content-start"},{default:o(()=>[s(e(C),{class:"game-menu",size:"2.2"},{default:o(()=>[(t(!0),S(x,null,T(i.value,u=>(t(),S("div",{ref_for:!0,ref:a=>G[u.labelId]=a,key:u.labelId,class:"game-label",onClick:a=>L(u.labelId)},[s(ue,{name:"fade"},{default:o(()=>[c.value==Number(u.labelId)?(t(),d(e(_),{key:0,src:u.imageUrlSelected,class:"game-img"},null,8,["src"])):(t(),d(e(_),{key:1,src:u.imageUrlUnselected,class:"game-img"},null,8,["src"]))]),_:2},1024)],8,Se))),128))]),_:1}),s(e(C),{size:"9.8",class:"games",onScroll:p},{default:o(()=>[(t(!0),S(x,null,T(i.value,u=>(t(),d(e(F),{ref_for:!0,ref:a=>m[u.labelId]=a,key:u.labelId},{default:o(()=>[(t(!0),S(x,null,T(u.gameList,a=>(t(),d(e(C),{size:a.imageSize==2?12:a.imageSize==3?8:4},{default:o(()=>[s(E,{game:a},null,8,["game"])]),_:2},1032,["size"]))),256))]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}))}},H={__name:"GameSub",props:{gameKey:{type:String,require:!0}},setup(f){const h=f,r=B(),c=O(),{preLoadImg:i}=K();return V(async()=>{r.fullLoading=!0,h.gameKey=="recentGameList"&&await c.getRecentGames(),h.gameKey=="favoriteGameList"&&await c.getFavoriteGames();for(const[v,m]of c[h.gameKey].entries())v<=16?await i(m.imageUrl):i(m.imageUrl);r.fullLoading=!1}),(v,m)=>(t(),d(e(R),{class:"game-sub"},{default:o(()=>[e(c)[f.gameKey].length>0?(t(),d(e(M),{key:0},{default:o(()=>[s(e(F),{class:"ion-justify-content-start"},{default:o(()=>[(t(!0),S(x,null,T(e(c)[f.gameKey],G=>(t(),d(e(C),{size:"3"},{default:o(()=>[s(E,{game:G},null,8,["game"])]),_:2},1024))),256))]),_:1})]),_:1})):(t(),d(ye,{key:1,class:"no-data"}))]),_:1}))}},be={key:0,class:"activity-icon"},ke={class:"activity-icon"},De={class:"item-button"},Ue={class:"item-button"},We={__name:"Home",setup(f){const h=B(),r=ve(),c=ne(),{getPublicUrl:i}=q(),{preLoadImg:v}=K(),m=w("GameList"),G={GameList:Ie,GameRecent:H,GameFavorite:H},D={GameList:null,GameRecent:"recentGameList",GameFavorite:"favoriteGameList"},n=w([]),L=async()=>{const p=await re();p.state==="200"?n.value=p.resultData.bannerList||[]:await(await $.create({message:p.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present()};return V(async()=>{await L();for(const[p,l]of n.value.entries())p<=1&&await v(l.imageUrl);await r.getMailList()}),(p,l)=>(t(),d(e(R),{class:"home"},{default:o(()=>[s(e(Q),null,{default:o(()=>[s(e(M),{style:{padding:"0"}},{default:o(()=>[s(e(F),{class:"ion-justify-content-between"},{default:o(()=>[s(e(C),{size:"6"},{default:o(()=>[s(e(_),{src:e(h).imgLogo.headerLogo,style:{width:"100%",margin:"auto"}},null,8,["src"])]),_:1}),s(e(C),{size:"auto",style:{display:"flex"}},{default:o(()=>[e(c).isShowTurnplate?(t(),S("div",be,[s(e(_),{src:e(i)("/home/icon-home-game.png")},null,8,["src"]),e(c).turnplate.totalRemainTimes>0?(t(),d(e(A),{key:0,'"':"",class:"activity-icon-tag"},{default:o(()=>[z(b(e(c).turnplate.totalRemainTimes||10),1)]),_:1})):k("",!0)])):k("",!0),U("div",ke,[s(e(_),{src:e(i)("/home/icon-mail.png"),"router-link":"/account/mail"},null,8,["src"]),e(r).hasUnread?(t(),d(e(A),{key:0,class:"activity-icon-tag"})):k("",!0)])]),_:1})]),_:1})]),_:1}),s(e(he),{modules:[e(Le),e(_e),e(W)],centeredSlides:!0,pagination:{clickable:!0},autoplay:{delay:3e3},loop:!0,lazyPreloadPrevNext:1},{default:o(()=>[(t(!0),S(x,null,T(n.value,(g,u)=>(t(),d(e(Ge),{key:"banner_".concat(u)},{default:o(()=>[s(e(_),{src:g.imageUrl,loading:"lazy"},null,8,["src"])]),_:2},1024))),128))]),_:1},8,["modules"]),s(ie),s(le,{class:"user-info"},{default:o(()=>[U("div",De,[s(e(_),{src:e(i)("/home/icon-deposit.png"),style:{height:"100%","margin-bottom":"5px"}},null,8,["src"]),U("div",null,b(p.$t("home.deposit")),1)]),U("div",Ue,[s(e(_),{src:e(i)("/home/icon-withdraw.png"),style:{height:"100%","margin-bottom":"5px"}},null,8,["src"]),U("div",null,b(p.$t("home.withdraw")),1)])]),_:1}),s(e(J),{modelValue:m.value,"onUpdate:modelValue":l[0]||(l[0]=g=>m.value=g),mode:"md"},{default:o(()=>[s(e(N),{class:"ion-text-capitalize",value:"GameList"},{default:o(()=>[z(b(p.$t("home.allgames")),1)]),_:1}),s(e(N),{class:"ion-text-capitalize",value:"GameRecent"},{default:o(()=>[z(b(p.$t("home.recent")),1)]),_:1}),s(e(N),{class:"ion-text-capitalize",value:"GameFavorite"},{default:o(()=>[z(b(p.$t("home.favorite")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(e(X),null,{default:o(()=>[(t(),d(ge,{exclude:"GameSub"},[(t(),d(de(G[m.value]),{class:"bottom-view",gameKey:D[m.value]},null,8,["gameKey"]))],1024))]),_:1})]),_:1}))}};export{We as default};
