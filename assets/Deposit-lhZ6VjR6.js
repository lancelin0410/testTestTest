import{g as ee,M as te,i as F,j as oe,k as se,K as D,P as ne,m as ae,o as H,Q as E,O as le,t as S,y as B,z as L,A as V,R as ie,d as I,T as re,C as de,h as ue,D as ce}from"./@ionic-qvL_eljm.js";import{r as $,c as K,H as u,K as w,C as a,J as n,E as e,M as t,O as b,P as o,U as M,F as P,j as pe,B as q,w as me,a as G,R as j,L as A,I as c,V as ge,Q as C,N as T,k as fe,W as he,X as ye}from"./@vue-Byjcq-FP.js";import{u as Q}from"./vue-i18n-CK_WgmAH.js";import{d as _e,s as ve}from"./pinia-DpQ9eBLY.js";import{r as J,c as U,u as be}from"./index-CM7ROxy-.js";import{a as Ie}from"./ionicons-T4lv_k6t.js";import"./@stencil-DBaMOtEh.js";import"./@capacitor-BXp5o1ZG.js";import"./vue-router-CLGTjHYu.js";import"./localforage-qzmIiYbH.js";import"./@adjustcom-Dev-Q0DI.js";import"./@intlify-BAcCFw_v.js";import"./pinia-plugin-persistedstate-2-DcGv4gw_.js";import"./@awesome-cordova-plugins-CT7d7gQP.js";import"./rxjs-C3tg6S9t.js";import"./tslib-BHBn2Msb.js";function $e(f){return J({url:"/recharge/getChargeInfo",method:"POST",data:f})}function ke(f){return J({url:"/recharge/createRechargeOrder",method:"POST",data:f})}const W=_e("deposit",()=>{const f=$({}),y=$([]),p=$([]),i=K(()=>h.value?f.value.typeB:f.value.typeA),h=$(!1);return{chargeInfo:f,rechargeTypes:y,rechargeTypeList:p,onlinePaymentInfo:i,isTypeB:h,getChargeInfo:async()=>{const d=await $e();console.log(d),d.state==="200"&&(f.value=d.resultData||{},y.value=f.value.rechargeTypes,p.value=f.value.rechargeTypeList)}}},{persistedState:{persist:!1}}),Ce={style:{color:"#ffdf3f","margin-left":"16px"}},we={style:{"font-size":"0.8rem"}},Pe={class:"block-content"},Me={class:"block-content"},Le={class:"block-title"},Te={class:"block-content"},Se={class:"block-title"},Ae={class:"block-content"},De={class:"block-content"},Ne={class:"block-content"},Oe={class:"block-content"},xe={__name:"SelfServiceUtr",props:{orderId:{type:String,default:""},pendingCount:{type:Number,default:0}},setup(f){const y=U(),{t:p}=Q(),i=f,h=$(!1),_=async()=>{if(i.orderId){if(y.appConfig.manualPendingMaxCount&&y.appConfig.manualPendingMaxCount>0&&i.pendingCount>=y.appConfig.manualPendingMaxCount){await(await S.create({message:"".concat(p("deposit.toast.text5")," ").concat(y.appConfig.manualPendingMaxCount," ").concat(p("deposit.toast.text6")),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}window.open("".concat(y.manualRechargeUrl,"?userId=").concat(userStore.userInfo.id,"&orderId=").concat(i.orderId))}else h.value=!0};return(d,m)=>(u(),w(P,null,[a(e(te),{class:"self-service",detail:!0,lines:"none",onClick:M(_,["stop"])},{default:n(()=>[a(e(ee),null,{default:n(()=>[t("h2",null,[b(o(d.$t("deposit.message.tipsUtr1")),1),t("span",Ce,o(d.$t("deposit.message.tipsUtr2")),1)]),t("p",we,o(d.$t("deposit.message.tipsUtr3")),1)]),_:1})]),_:1}),a(e(le),{class:"self-service-info","is-open":h.value},{default:n(()=>[a(e(F),null,{default:n(()=>[a(e(oe),null,{default:n(()=>[a(e(se),{slot:"start"},{default:n(()=>[a(e(D),{onClick:m[0]||(m[0]=M(g=>h.value=!1,["stop"]))},{default:n(()=>[a(e(ne),{slot:"icon-only",icon:e(Ie),color:"light"},null,8,["icon"])]),_:1})]),_:1}),a(e(ae),null,{default:n(()=>[b(o(d.$t("deposit.title")),1)]),_:1})]),_:1})]),_:1}),a(e(H),{class:"ion-padding"},{default:n(()=>[t("div",Pe,o(d.$t("deposit.utrPage.text1")),1),t("div",Me,o(d.$t("deposit.utrPage.text2")),1),t("div",Le,o(d.$t("deposit.utrPage.title1")),1),t("div",Te,o(d.$t("deposit.utrPage.text3")),1),t("div",Se,o(d.$t("deposit.utrPage.title2")),1),t("div",Ae,o(d.$t("deposit.utrPage.text4")),1),t("div",De,o(d.$t("deposit.utrPage.text5")),1),t("div",Ne,o(d.$t("deposit.utrPage.text6")),1),t("div",Oe,o(d.$t("deposit.utrPage.text7")),1)]),_:1}),a(e(E),null,{default:n(()=>[a(e(D),{class:"btn-deposit-history",expand:"block",shape:"round"},{default:n(()=>[b(o(d.$t("deposit.button.gotoDepositHistory")),1)]),_:1})]),_:1})]),_:1},8,["is-open"])],64))}},Be={style:{margin:"4px 0"}},Ve={class:"block-title"},Ue={class:"ion-margin-start",style:{"font-size":"0.9rem"}},ze={class:"ion-margin-start",style:{"font-size":"0.9rem"}},Re=t("hr",null,null,-1),Ge={class:"method-bg"},je={class:"method-text"},Fe={class:"method-fg"},He=t("hr",null,null,-1),Ee={class:"method-bg"},Ke={class:"channel-text"},qe={class:"method-fg"},Qe=t("hr",null,null,-1),Je={style:{margin:"4px 0"}},We={class:"block-title"},Xe=t("hr",null,null,-1),Ye={key:0,style:{margin:"4px 0"}},Ze={class:"block-title"},et=t("hr",null,null,-1),tt={style:{margin:"4px 0"}},ot={class:"block-title"},st={style:{"font-size":"0.8rem"}},nt={__name:"OnlinePayment",setup(f){const{t:y}=Q(),p=U(),i=W(),{isTypeB:h}=ve(i),{getImgUrl:_}=be(),d="Rs",m=$(0),g=$(0),s=pe({depositAmount:0,depositMethodItem:{},depositMethod:"",depositMethodName:"",depositChannel:1,depositMethodList:[]});q(async()=>{}),me(()=>{var l;return(l=i.onlinePaymentInfo)==null?void 0:l.amountList},()=>{p.barLoading=!0,m.value=i.onlinePaymentInfo.amountList[0],g.value=i.onlinePaymentInfo.amountList[i.onlinePaymentInfo.amountList.length-1];const l=i.onlinePaymentInfo.amountList.indexOf(i.chargeInfo.defaultIndex);s.depositAmount=i.onlinePaymentInfo.amountList[l+1],s.depositMethodItem=i.rechargeTypeList[0],s.depositMethod=i.rechargeTypeList[0].type,s.depositMethodName=i.rechargeTypeList[0].name,p.barLoading=!1});const N=l=>{s.depositAmount=Number(l)},X=l=>{s.depositMethodItem=l,s.depositMethod=l.type,s.depositMethodName=l.name},Y=l=>{s.depositChannel=Number(l)},Z=async()=>{if(!s.depositAmount){await(await S.create({message:y("deposit.toast.text1"),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}if(Number(s.depositAmount)<m.value||Number(s.depositAmount)>g.value){await(await S.create({message:"".concat(y("deposit.toast.text2")," ").concat(m.value," - ").concat(g.value),duration:1500,position:"top",color:"warning",translucent:!0})).present();return}p.fullLoading=!0;const l=await ke({amount:s.depositAmount,channelId:s.depositChannel,rechargeType:s.depositMethod==5?"H":i.onlinePaymentInfo.rechargeType,accountType:s.depositMethodName});l.state==="200"?l.resultData.url&&window.open(l.resultData.url,"_blank"):await(await S.create({message:l.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present(),p.fullLoading=!1};return(l,k)=>{var z;return u(),w(P,null,[G(a(e(H),{class:"online-payment"},{default:n(()=>{var R;return[t("div",Be,[t("span",Ve,o(l.$t("deposit.depositAmount"))+": ",1),t("span",Ue,"Min: "+o(m.value.toLocaleString()),1),t("span",ze,"Max: "+o(g.value.toLocaleString()),1)]),a(e(B),{style:{margin:"8px 0"}},{default:n(()=>{var r;return[(u(!0),w(P,null,A((r=e(i).onlinePaymentInfo)==null?void 0:r.amountList,(v,O)=>(u(),c(e(L),{key:O,size:"2.8",class:ge(["amount-item",{select:Number(v)==Number(s.depositAmount)}]),onClick:M(x=>N(v),["stop"])},{default:n(()=>[e(h)?(u(),c(e(V),{key:0,class:"amount-badge",color:"danger"},{default:n(()=>{var x;return[b("+"+o((x=e(i).onlinePaymentInfo)==null?void 0:x.giftList[O]),1)]}),_:2},1024)):C("",!0),t("div",null,o(e(d))+" "+o(v==null?void 0:v.toLocaleString()),1)]),_:2},1032,["class","onClick"]))),128))]}),_:1}),a(e(ie),{modelValue:s.depositAmount,"onUpdate:modelValue":k[0]||(k[0]=r=>s.depositAmount=r),label:e(d),type:"number",placeholder:l.$t("deposit.depositAmount"),max:g.value,min:m.value,clearInput:!0},null,8,["modelValue","label","placeholder","max","min"]),Re,a(e(B),{style:{margin:"8px 0"}},{default:n(()=>[(u(!0),w(P,null,A(e(i).rechargeTypeList,(r,v)=>(u(),c(e(L),{key:v,size:"3.5",class:"method-item",onClick:M(O=>X(r),["stop"])},{default:n(()=>[t("div",Ge,[a(T,{name:"fade"},{default:n(()=>[r.disable?(u(),c(e(I),{key:0,src:e(_)("/wallet/icon-btn-bg-disable.png")},null,8,["src"])):r.type==s.depositMethod?(u(),c(e(I),{key:1,src:e(_)("/wallet/icon-btn-bg-select.png")},null,8,["src"])):(u(),c(e(I),{key:2,src:e(_)("/wallet/icon-btn-bg.png")},null,8,["src"]))]),_:2},1024)]),t("div",je,[a(e(I),{src:r.disable?r.unableUrl:r.iconUrl},null,8,["src"]),t("span",null,o(r.name),1)]),r.isRecommend?(u(),c(e(V),{key:0,class:"recommend-badge",color:"danger"},{default:n(()=>[b(o(e(d))+" "+o(r.isRecommend)+"+",1)]),_:2},1024)):C("",!0),t("div",Fe,[a(T,{name:"fade"},{default:n(()=>[r.type==s.depositMethod?(u(),c(e(I),{key:0,src:e(_)("/wallet/icon-btn-select-m.png")},null,8,["src"])):C("",!0)]),_:2},1024)])]),_:2},1032,["onClick"]))),128)),a(e(L),null,{default:n(()=>[s.depositMethodItem.isGuide?(u(),c(e(D),{key:0,class:"btn-guide",fill:"clear",href:s.depositMethodItem.isGuide,target:"_blank",size:"small"},{default:n(()=>[b(o(l.$t("deposit.howToUse")),1)]),_:1},8,["href"])):C("",!0)]),_:1})]),_:1}),He,a(e(B),{style:{margin:"8px 0"}},{default:n(()=>[(u(),w(P,null,A([1,2,3],r=>a(e(L),{key:r,size:"3.5",class:"method-item",onClick:M(v=>Y(r),["stop"])},{default:n(()=>[t("div",Ee,[a(T,{name:"fade"},{default:n(()=>[r==s.depositChannel?(u(),c(e(I),{key:0,src:e(_)("/wallet/icon-btn-bg-select.png")},null,8,["src"])):(u(),c(e(I),{key:1,src:e(_)("/wallet/icon-btn-bg.png")},null,8,["src"]))]),_:2},1024)]),t("div",Ke,o(l.$t("deposit.channel"))+" "+o(r),1),t("div",qe,[a(T,{name:"fade"},{default:n(()=>[r==s.depositChannel?(u(),c(e(I),{key:0,src:e(_)("/wallet/icon-btn-select-m.png")},null,8,["src"])):C("",!0)]),_:2},1024)])]),_:2},1032,["onClick"])),64))]),_:1}),Qe,t("div",Je,[t("div",We,o(l.$t("deposit.depositEvent"))+": ",1),a(e(re),{modelValue:e(h),"onUpdate:modelValue":k[1]||(k[1]=r=>fe(h)?h.value=r:null),"label-placement":"end"},{default:n(()=>{var r,v;return[b(o("+".concat((((v=(r=e(i).chargeInfo)==null?void 0:r.typeB)==null?void 0:v.gift)||0)*100,"%"))+" "+o(l.$t("deposit.bonus")),1)]}),_:1},8,["modelValue"])]),Xe,(R=e(i).chargeInfo)!=null&&R.fillOrderSwitch?(u(),w("div",Ye,[t("div",Ze,o(l.$t("deposit.depositService"))+": ",1),a(xe),et])):C("",!0),t("div",tt,[t("div",ot,o(l.$t("deposit.depositTips"))+": ",1),t("span",st,[t("div",null,o(l.$t("deposit.message.tips1")),1),t("div",null,o(l.$t("deposit.message.tips2")),1)])])]}),_:1},512),[[j,(z=e(i).onlinePaymentInfo)==null?void 0:z.amountList]]),G(a(e(E),null,{default:n(()=>[a(e(D),{class:"btn-deposit",expand:"block",shape:"round",onClick:Z},{default:n(()=>[b(o(l.$t("deposit.button.depositNow")),1)]),_:1})]),_:1},512),[[j,s.depositAmount]])],64)}}},It={__name:"Deposit",setup(f){const y=U(),p=W(),i=$("OnlinePayment"),h={1:{name:"deposit.onlinePayment",value:"OnlinePayment"},2:{name:"deposit.transferDeposit",value:"TransferDeposit"},3:{name:"deposit.agencyDeposit",value:"AgencyDeposit"},4:{name:"deposit.crypto",value:"Crypto"}},_=K(()=>Object.keys(h).filter(m=>p.rechargeTypes.includes(m)).reduce((m,g)=>{m[g]=h[g];const s=g==2||g==3?"+".concat(p.chargeInfo.transferGift*100,"%"):g==4?"+".concat(p.chargeInfo.cryptoGift*100,"%"):"";return m[g].badge=s,m},{})),d={OnlinePayment:nt};return q(async()=>{y.barLoading=!0,await p.getChargeInfo()}),(m,g)=>(u(),c(e(ue),{class:"deposit"},{default:n(()=>[a(e(F),null,{default:n(()=>[Object.keys(_.value).length>1?(u(),c(e(de),{key:0,modelValue:i.value,"onUpdate:modelValue":g[0]||(g[0]=s=>i.value=s),mode:"md",scrollable:!0},{default:n(()=>[(u(!0),w(P,null,A(_.value,(s,N)=>(u(),c(e(ce),{key:N,class:"ion-text-capitalize",value:s.value},{default:n(()=>[a(e(V),{class:"recharge-badge",color:"danger"},{default:n(()=>[b(o(s.badge),1)]),_:2},1024),t("div",null,o(m.$t(s.name)),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])):C("",!0)]),_:1}),(u(),c(he,null,[(u(),c(ye(d[i.value])))],1024))]),_:1}))}};export{It as default};
