import{d as L,t as $,x as M,y as F,z as C,h as R,A as V,B as W,C as J,D as N,i as Q,o as X}from"./@ionic-Dolm7zi0.js";import{g as Y,a as Z,b as ee,c as B,u as H,d as te,s as ae,e as se,f as oe,h as q,i as ne,j as re,k as ie}from"./index-B22vJmmO.js";import{_ as le}from"./Marquee-C4k81s36.js";import{_ as ce}from"./UserInfo-B16POXZe.js";import{r as w,c as me,G as t,J as S,L as U,B as s,D as e,H as u,P as D,S as A,U as ue,O as k,A as K,j as P,I as o,F as x,K as T,M as ge,N as z,V as de,W as fe}from"./@vue-CTzZmrEY.js";import{b as pe}from"./vue-router-D889LiZM.js";import{d as ye}from"./pinia-DKQUv1OW.js";import{_ as ve,u as he}from"./useMailStore-DG5wTqqd.js";import{S as Le,A as _e,P as Ge,a as we}from"./swiper-Ba4ICoCD.js";import"./@stencil-DBaMOtEh.js";import"./@capacitor-BXp5o1ZG.js";import"./localforage-qzmIiYbH.js";import"./@adjustcom-Dev-Q0DI.js";import"./vue-i18n-DnF4oqIJ.js";import"./@intlify-BAcCFw_v.js";import"./pinia-plugin-persistedstate-2-DcGv4gw_.js";import"./@awesome-cordova-plugins-CT7d7gQP.js";import"./rxjs-C3tg6S9t.js";import"./tslib-BHBn2Msb.js";const O=ye("game",()=>{const f=w([]),h=async()=>{const n=await Y();n.state==="200"&&(f.value=n.resultData||[])},i=w([]),c=async()=>{const n=await Z();n.state==="200"&&(i.value=n.resultData||[])},l=w([]),g=w([]),p=w([]),_=w([]);return{favoriteGameList:f,getFavoriteGames:h,recentGameList:i,getRecentGames:c,recentSearches:l,popularSearches:g,hotGameList:p,recommendGameList:_,getGameSearchData:async()=>{const n=await ee();return n.state,code===200&&n&&(l.value=n.resultData.recentSearches||[],g.value=n.resultData.popularSearches||[],i.value=n.resultData.recentGameList||[],p.value=n.resultData.hotGameList||[],_.value=n.resultData.recommendGameList||[]),!0}}},{persistedState:{persist:!1}}),Se={key:0,class:"game-name"},E={__name:"GameItem",props:{game:{type:Object,require:!0}},setup(f){const{getPublicUrl:h}=H(),i=f,c=pe(),l=B(),g=O(),p=async()=>{if(i.game.iconType!=2){l.fullLoading=!0;const n=i.game.gameId||i.game.id,r=await te({gameId:n});if(r.state==="200"){const G=Capacitor.convertFileSrc(r.resultData);await g.getRecentGames(),c.push({name:"GameWeb",query:{gameId:n,url:encodeURIComponent(G)}})}else await(await $.create({message:r.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present();l.fullLoading=!1}},_=me(()=>g.favoriteGameList.filter(r=>r.gameId==i.game.gameId||r.gameId==i.game.id).length>0),b=async()=>{if(i.game.iconType!=2){l.fullLoading=!0;const n=i.game.gameId||i.game.id,r=await ae({gameId:n,opt:_.value?2:1});r.state==="200"?g.getFavoriteGames():await(await $.create({message:r.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present(),l.fullLoading=!1}};return(n,r)=>(t(),S("div",{class:"game-item",onClick:A(p,["stop"])},[U("div",{class:ue(["game-image",{large:f.game.imageSize==2}])},[s(e(L),{class:"game-icon",src:f.game.imageUrl},null,8,["src"]),f.game.cornerMark==1?(t(),u(e(L),{key:0,class:"game-tag",src:e(h)("/home/icon-new.png")},null,8,["src"])):D("",!0),f.game.cornerMark==2?(t(),u(e(L),{key:1,class:"game-tag",src:e(h)("/home/icon-best.png")},null,8,["src"])):D("",!0),f.game.iconType!=2?(t(),S("div",{key:2,class:"game-collect",onClick:A(b,["stop"])},[_.value?(t(),u(e(L),{key:0,src:e(h)("/home/icon-collection-select.png"),style:{width:"24px",height:"24px"}},null,8,["src"])):(t(),u(e(L),{key:1,src:e(h)("/home/icon-collection-normal.png"),style:{width:"24px",height:"24px"}},null,8,["src"]))])):D("",!0)],2),f.game.imageSize!=2?(t(),S("div",Se,k(f.game.name),1)):D("",!0)]))}},Ie=["onClick"],be={__name:"GameList",setup(f){const h=B(),{preLoadImg:i}=q(),c=w(1),l=w([]);let g=!1;K(async()=>await b());const p=P({}),_=P({}),b=async()=>{const m=await se();if(m.state==="200"){l.value=m.resultData.labelList||[],c.value=Number(l.value[0].labelId);const y=m.resultData.firstLabelGameList,d=m.resultData.categoryList;l.value[0].gameList=m.resultData.gameAndCategoryList.map(a=>{if(a.iconType==1){const v=y.filter(I=>I.status&&I.gameId==a.id);a.name=v.length>0?v[0].gameName:""}if(a.iconType==2){const v=d.filter(I=>I.categoryId==a.id);a.name=v.length>0?v[0].categoryName:""}return a});for(const[a,v]of l.value[0].gameList.entries())a<=12&&await i(v.imageUrl);h.startLoading=!1;for(const[a,v]of l.value.entries())i(v.imageUrlSelected),i(v.imageUrlUnselected),a>0&&(v.gameList=await n(v.labelId),v.gameList.forEach(I=>i(I.imageUrl)))}else await(await $.create({message:m.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present()},n=async m=>{const y=await oe({labelId:m});if(y.state==="200"){const d=y.resultData.gameList.filter(a=>a.status)||[];return y.resultData.gameAndCategoryList.map(a=>{const v=d.filter(I=>I.status&&I.gameId==a.id);return a.name=v.length>0?v[0].gameName:"",a}).filter(a=>a.imageUrl)}else return await(await $.create({message:y.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present(),[]},r=m=>{g=!0,c.value=Number(m),p[m].$el.scrollIntoView({behavior:"smooth"})},G=m=>{if(g){const y=p[c.value].$el.offsetTop,d=y+p[c.value].$el.offsetHeight;y<=m.target.scrollTop&&m.target.scrollTop<=d&&(g=!1)}else for(const y in p)p[y].$el.offsetTop<=m.target.scrollTop&&(c.value=Number(y),_[y].scrollIntoView())};return(m,y)=>(t(),u(e(R),{class:"game-list"},{default:o(()=>[s(e(M),null,{default:o(()=>[s(e(F),{class:"ion-justify-content-start"},{default:o(()=>[s(e(C),{class:"game-menu",size:"2.2"},{default:o(()=>[(t(!0),S(x,null,T(l.value,d=>(t(),S("div",{ref_for:!0,ref:a=>_[d.labelId]=a,key:d.labelId,class:"game-label",onClick:a=>r(d.labelId)},[s(ge,{name:"fade"},{default:o(()=>[c.value==Number(d.labelId)?(t(),u(e(L),{key:0,src:d.imageUrlSelected,class:"game-img"},null,8,["src"])):(t(),u(e(L),{key:1,src:d.imageUrlUnselected,class:"game-img"},null,8,["src"]))]),_:2},1024)],8,Ie))),128))]),_:1}),s(e(C),{size:"9.8",class:"games",onScroll:G},{default:o(()=>[(t(!0),S(x,null,T(l.value,d=>(t(),u(e(F),{ref_for:!0,ref:a=>p[d.labelId]=a,key:d.labelId},{default:o(()=>[(t(!0),S(x,null,T(d.gameList,a=>(t(),u(e(C),{size:a.imageSize==2?12:a.imageSize==3?8:4},{default:o(()=>[s(E,{game:a},null,8,["game"])]),_:2},1032,["size"]))),256))]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}))}},j={__name:"GameSub",props:{gameKey:{type:String,require:!0}},setup(f){const h=f,i=B(),c=O(),{preLoadImg:l}=q();return K(async()=>{i.fullLoading=!0,h.gameKey=="recentGameList"&&await c.getRecentGames(),h.gameKey=="favoriteGameList"&&await c.getFavoriteGames();for(const[g,p]of c[h.gameKey].entries())g<=16?await l(p.imageUrl):l(p.imageUrl);i.fullLoading=!1}),(g,p)=>(t(),u(e(R),{class:"game-sub"},{default:o(()=>[e(c)[f.gameKey].length>0?(t(),u(e(M),{key:0},{default:o(()=>[s(e(F),{class:"ion-justify-content-start"},{default:o(()=>[(t(!0),S(x,null,T(e(c)[f.gameKey],_=>(t(),u(e(C),{size:"3"},{default:o(()=>[s(E,{game:_},null,8,["game"])]),_:2},1024))),256))]),_:1})]),_:1})):(t(),u(ve,{key:1,class:"no-data"}))]),_:1}))}},ke={key:0,class:"activity-icon"},De={class:"activity-icon"},Ue={class:"item-button"},Ce={class:"item-button"},Je={__name:"Home",setup(f){const h=B();ne();const i=he(),c=re(),{getPublicUrl:l}=H(),g=w("GameList"),p={GameList:be,GameRecent:j,GameFavorite:j},_={GameList:null,GameRecent:"recentGameList",GameFavorite:"favoriteGameList"},b=w([]),n=async()=>{const r=await ie();r.state==="200"?b.value=r.resultData.bannerList||[]:await(await $.create({message:r.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present()};return K(async()=>{await n();for(const[r,G]of b.value.entries())r<=1&&await preLoadImg(G.imageUrl);await i.getMailList()}),(r,G)=>(t(),u(e(R),{class:"home"},{default:o(()=>[s(e(Q),null,{default:o(()=>[s(e(M),{style:{padding:"0"}},{default:o(()=>[s(e(F),{class:"ion-justify-content-between"},{default:o(()=>[s(e(C),{size:"6"},{default:o(()=>[s(e(L),{src:e(h).imgLogo.headerLogo,style:{width:"100%",margin:"auto"}},null,8,["src"])]),_:1}),s(e(C),{size:"auto",style:{display:"flex"}},{default:o(()=>[e(c).isShowTurnplate?(t(),S("div",ke,[s(e(L),{src:e(l)("/home/icon-home-game.png")},null,8,["src"]),e(c).turnplate.totalRemainTimes>0?(t(),u(e(V),{key:0,'"':"",class:"activity-icon-tag"},{default:o(()=>[z(k(e(c).turnplate.totalRemainTimes||10),1)]),_:1})):D("",!0)])):D("",!0),U("div",De,[s(e(L),{src:e(l)("/home/icon-mail.png"),"router-link":"/account/mail"},null,8,["src"]),e(i).hasUnread?(t(),u(e(V),{key:0,class:"activity-icon-tag"})):D("",!0)])]),_:1})]),_:1})]),_:1}),s(e(Le),{modules:[e(_e),e(Ge),e(W)],centeredSlides:!0,pagination:{clickable:!0},autoplay:{delay:3e3},loop:!0,lazyPreloadPrevNext:1},{default:o(()=>[(t(!0),S(x,null,T(b.value,(m,y)=>(t(),u(e(we),{key:"banner_".concat(y)},{default:o(()=>[s(e(L),{src:m.imageUrl,loading:"lazy"},null,8,["src"])]),_:2},1024))),128))]),_:1},8,["modules"]),s(le),s(ce,{class:"user-info"},{default:o(()=>[U("div",Ue,[s(e(L),{src:e(l)("/home/icon-deposit.png"),style:{height:"100%","margin-bottom":"5px"}},null,8,["src"]),U("div",null,k(r.$t("home.deposit")),1)]),U("div",Ce,[s(e(L),{src:e(l)("/home/icon-withdraw.png"),style:{height:"100%","margin-bottom":"5px"}},null,8,["src"]),U("div",null,k(r.$t("home.withdraw")),1)])]),_:1}),s(e(J),{modelValue:g.value,"onUpdate:modelValue":G[0]||(G[0]=m=>g.value=m),mode:"md"},{default:o(()=>[s(e(N),{class:"ion-text-capitalize",value:"GameList"},{default:o(()=>[z(k(r.$t("home.allgames")),1)]),_:1}),s(e(N),{class:"ion-text-capitalize",value:"GameRecent"},{default:o(()=>[z(k(r.$t("home.recent")),1)]),_:1}),s(e(N),{class:"ion-text-capitalize",value:"GameFavorite"},{default:o(()=>[z(k(r.$t("home.favorite")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(e(X),null,{default:o(()=>[(t(),u(de,{exclude:"GameSub"},[(t(),u(fe(p[g.value]),{class:"bottom-view",gameKey:_[g.value]},null,8,["gameKey"]))],1024))]),_:1})]),_:1}))}};export{Je as default};
