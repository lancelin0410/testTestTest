import{d as G,t as H,x as A,y as M,z as $,h as P,A as q,B as X,C as Y,D as R,i as Z,o as ee}from"./@ionic-D6JpvR1m.js";import{g as te,a as ae,b as se,c as B,u as W,d as oe,s as ie,e as le,f as ne,h as V,i as re,j as ce}from"./index-DVNNekmp.js";import{_ as me}from"./Marquee-iseTHjaZ.js";import{_ as ue}from"./UserInfo-Dyb22Bx6.js";import{r as w,c as ge,G as a,J as I,L as C,B as o,D as e,H as m,P as U,S as O,U as K,O as T,j as de,A as j,I as i,F as x,K as z,M as fe,N as F,V as pe,W as ye}from"./@vue-CTzZmrEY.js";import{b as ve}from"./vue-router-D889LiZM.js";import{d as he}from"./pinia-DKQUv1OW.js";import{_ as Le,u as _e}from"./useMailStore-B9U7srDl.js";import{S as Ge,A as we,P as Se,a as Ie}from"./swiper-Ba4ICoCD.js";import"./@stencil-DBaMOtEh.js";import"./@capacitor-BXp5o1ZG.js";import"./localforage-qzmIiYbH.js";import"./@adjustcom-Dev-Q0DI.js";import"./vue-i18n-DnF4oqIJ.js";import"./@intlify-BAcCFw_v.js";import"./pinia-plugin-persistedstate-2-DcGv4gw_.js";import"./@awesome-cordova-plugins-CT7d7gQP.js";import"./rxjs-C3tg6S9t.js";import"./tslib-BHBn2Msb.js";const J=he("game",()=>{const d=w([]),h=async()=>{const s=await te();s.state==="200"&&(d.value=s.resultData||[])},n=w([]),u=async()=>{const s=await ae();s.state==="200"&&(n.value=s.resultData||[])},g=w([]),L=w([]),r=w([]),p=w([]);return{favoriteGameList:d,getFavoriteGames:h,recentGameList:n,getRecentGames:u,recentSearches:g,popularSearches:L,hotGameList:r,recommendGameList:p,getGameSearchData:async()=>{const s=await se();return s.state,code===200&&s&&(g.value=s.resultData.recentSearches||[],L.value=s.resultData.popularSearches||[],n.value=s.resultData.recentGameList||[],r.value=s.resultData.hotGameList||[],p.value=s.resultData.recommendGameList||[]),!0}}},{persistedState:{persist:!1}}),be={key:0,class:"game-name"},Q={__name:"GameItem",props:{game:{type:Object,require:!0}},setup(d){const{getPublicUrl:h}=W(),n=d,u=ve(),g=B(),L=J(),r=async()=>{if(n.game.iconType!=2){g.fullLoading=!0;const s=n.game.gameId||n.game.id,y=await oe({gameId:s});if(y.state==="200"){const b=Capacitor.convertFileSrc(y.resultData);await L.getRecentGames(),u.push({name:"GameWeb",query:{gameId:s,url:encodeURIComponent(b)}})}else await(await H.create({message:y.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present();g.fullLoading=!1}},p=ge(()=>L.favoriteGameList.filter(y=>y.gameId==n.game.gameId||y.gameId==n.game.id).length>0),S=async()=>{if(n.game.iconType!=2){g.fullLoading=!0;const s=n.game.gameId||n.game.id,y=await ie({gameId:s,opt:p.value?2:1});y.state==="200"?L.getFavoriteGames():await(await H.create({message:y.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present(),g.fullLoading=!1}};return(s,y)=>(a(),I("div",{class:"game-item",onClick:O(r,["stop"])},[C("div",{class:K(["game-image",{large:d.game.imageSize==2}])},[o(e(G),{class:"game-icon",src:d.game.imageUrl},null,8,["src"]),d.game.cornerMark==1?(a(),m(e(G),{key:0,class:"game-tag",src:e(h)("/home/icon-new.png")},null,8,["src"])):U("",!0),d.game.cornerMark==2?(a(),m(e(G),{key:1,class:"game-tag",src:e(h)("/home/icon-best.png")},null,8,["src"])):U("",!0),d.game.iconType!=2?(a(),I("div",{key:2,class:"game-collect",onClick:O(S,["stop"])},[p.value?(a(),m(e(G),{key:0,src:e(h)("/home/icon-collection-select.png"),style:{width:"24px",height:"24px"}},null,8,["src"])):(a(),m(e(G),{key:1,src:e(h)("/home/icon-collection-normal.png"),style:{width:"24px",height:"24px"}},null,8,["src"]))])):U("",!0)],2),d.game.imageSize!=2?(a(),I("div",be,T(d.game.name),1)):U("",!0)]))}},ke=["onClick"],De={__name:"GameList",emits:["reduceHeaderHeight"],setup(d,{emit:h}){const n=B(),{preLoadImg:u}=V(),g=w(null),L=w(null),r=de({}),p=w(1),S=w([]);let s=!1;const y=h;j(async()=>await b());const b=async()=>{const l=await le();if(l.state==="200"){S.value=l.resultData.labelList||[],p.value=Number(S.value[0].labelId);const _=l.resultData.firstLabelGameList,f=l.resultData.categoryList;S.value[0].gameList=l.resultData.gameAndCategoryList.map(t=>{if(t.iconType==1){const c=_.filter(k=>k.status&&k.gameId==t.id);t.name=c.length>0?c[0].gameName:""}if(t.iconType==2){const c=f.filter(k=>k.categoryId==t.id);t.name=c.length>0?c[0].categoryName:""}return t});for(const[t,c]of S.value[0].gameList.entries())t<=12&&await u(c.imageUrl);n.startLoading=!1;for(const[t,c]of S.value.entries())u(c.imageUrlSelected),u(c.imageUrlUnselected),t>0&&(c.gameList=await N(c.labelId),c.gameList.forEach(k=>u(k.imageUrl)))}else await(await H.create({message:l.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present()},N=async l=>{const _=await ne({labelId:l});if(_.state==="200"){const f=_.resultData.gameList.filter(t=>t.status)||[];return _.resultData.gameAndCategoryList.map(t=>{const c=f.filter(k=>k.status&&k.gameId==t.id);return t.name=c.length>0?c[0].gameName:"",t}).filter(t=>t.imageUrl)}else return await(await H.create({message:_.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present(),[]},v=l=>{s=!0,p.value=Number(l),r[l].$el.scrollIntoView({behavior:"smooth"})},D=l=>{const _=g.value.$el.offsetHeight,f=L.value.$el.offsetHeight;if(_<f&&l.target.scrollTop>0&&y("reduceHeaderHeight",_-f),l.target.scrollTop==0&&y("reduceHeaderHeight",0),s){const t=r[p.value].$el.offsetTop,c=t+r[p.value].$el.offsetHeight;t<=l.target.scrollTop&&l.target.scrollTop<=c&&(s=!1)}else for(const t in r)r[t].$el.offsetTop<=l.target.scrollTop&&(p.value=Number(t))};return(l,_)=>(a(),m(e(P),{ref_key:"gameList",ref:g,class:"game-list"},{default:i(()=>[o(e(A),null,{default:i(()=>[o(e(M),{class:"ion-justify-content-start"},{default:i(()=>[o(e($),{class:"game-menu",ref_key:"gameMenu",ref:L,size:"2.2"},{default:i(()=>[(a(!0),I(x,null,z(S.value,f=>(a(),I("div",{key:f.labelId,class:"game-label",onClick:t=>v(f.labelId)},[o(fe,{name:"fade"},{default:i(()=>[p.value==Number(f.labelId)?(a(),m(e(G),{key:0,src:f.imageUrlSelected,class:"game-img"},null,8,["src"])):(a(),m(e(G),{key:1,src:f.imageUrlUnselected,class:"game-img"},null,8,["src"]))]),_:2},1024)],8,ke))),128))]),_:1},512),o(e($),{size:"9.8",class:"games",onScroll:D},{default:i(()=>[(a(!0),I(x,null,z(S.value,f=>(a(),m(e(M),{ref_for:!0,ref:t=>r[f.labelId]=t,key:f.labelId,class:"ion-justify-content-start"},{default:i(()=>[(a(!0),I(x,null,z(f.gameList,t=>(a(),m(e($),{size:t.imageSize==2?12:t.imageSize==3?8:4},{default:i(()=>[o(Q,{game:t},null,8,["game"])]),_:2},1032,["size"]))),256))]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},512))}},E={__name:"GameSub",props:{gameKey:{type:String,require:!0}},setup(d){const h=d,n=B(),u=J(),{preLoadImg:g}=V();return j(async()=>{n.fullLoading=!0,h.gameKey=="recentGameList"&&await u.getRecentGames(),h.gameKey=="favoriteGameList"&&await u.getFavoriteGames();for(const[L,r]of u[h.gameKey].entries())L<=16?await g(r.imageUrl):g(r.imageUrl);n.fullLoading=!1}),(L,r)=>(a(),m(e(P),{class:"game-sub"},{default:i(()=>[e(n).fullLoading||e(u)[d.gameKey].length==0?(a(),m(Le,{key:0,class:"no-data"})):(a(),m(e(A),{key:1},{default:i(()=>[o(e(M),{class:"ion-justify-content-start"},{default:i(()=>[(a(!0),I(x,null,z(e(u)[d.gameKey],p=>(a(),m(e($),{size:"3"},{default:i(()=>[o(Q,{game:p},null,8,["game"])]),_:2},1024))),256))]),_:1})]),_:1}))]),_:1}))}},Te={key:0,class:"activity-icon"},Ue={class:"activity-icon"},Ce={class:"item-button"},$e={class:"item-button"},Xe={__name:"Home",setup(d){const h=B(),n=_e(),u=re(),{getPublicUrl:g}=W(),{preLoadImg:L}=V(),r=w("GameList"),p={GameList:De,GameRecent:E,GameFavorite:E},S={GameList:null,GameRecent:"recentGameList",GameFavorite:"favoriteGameList"},s=w([]),y=async()=>{const v=await ce();v.state==="200"?s.value=v.resultData.bannerList||[]:await(await H.create({message:v.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present()};j(async()=>{await y();for(const[v,D]of s.value.entries())v<=1&&await L(D.imageUrl);await n.getMailList()});const b=w(!1),N=v=>{b.value=v<0};return(v,D)=>(a(),m(e(P),{class:"home"},{default:i(()=>[o(e(Z),null,{default:i(()=>[o(e(A),{style:{padding:"0",position:"sticky",top:"0","z-index":"2"}},{default:i(()=>[o(e(M),{class:"ion-justify-content-between"},{default:i(()=>[o(e($),{size:"4"},{default:i(()=>[o(e(G),{src:e(h).imgLogo.headerLogo,style:{width:"100%",margin:"auto"}},null,8,["src"])]),_:1}),o(e($),{size:"auto",style:{display:"flex"}},{default:i(()=>[e(u).isShowTurnplate?(a(),I("div",Te,[o(e(G),{src:e(g)("/home/icon-home-game.png")},null,8,["src"]),e(u).turnplate.totalRemainTimes>0?(a(),m(e(q),{key:0,class:"activity-icon-tag"},{default:i(()=>[F(T(e(u).turnplate.totalRemainTimes||10),1)]),_:1})):U("",!0)])):U("",!0),C("div",Ue,[o(e(G),{src:e(g)("/home/icon-mail.png"),"router-link":"/account/mail"},null,8,["src"]),e(n).hasUnread?(a(),m(e(q),{key:0,class:"activity-icon-tag"})):U("",!0)])]),_:1})]),_:1})]),_:1}),o(e(Ge),{class:K({simplify:b.value}),modules:[e(we),e(Se),e(X)],centeredSlides:!0,pagination:{clickable:!0},autoplay:!1,loop:!0,lazyPreloadPrevNext:1},{default:i(()=>[(a(!0),I(x,null,z(s.value,(l,_)=>(a(),m(e(Ie),{key:"banner_".concat(_)},{default:i(()=>[o(e(G),{src:l.imageUrl,loading:"lazy"},null,8,["src"])]),_:2},1024))),128))]),_:1},8,["class","modules"]),o(me,{class:K({simplify:b.value})},null,8,["class"]),o(ue,{class:"user-info"},{default:i(()=>[C("div",Ce,[o(e(G),{src:e(g)("/home/icon-deposit.png"),style:{height:"8vw",margin:"auto"}},null,8,["src"]),C("div",null,T(v.$t("home.deposit")),1)]),C("div",$e,[o(e(G),{src:e(g)("/home/icon-withdraw.png"),style:{height:"8vw",margin:"auto"}},null,8,["src"]),C("div",null,T(v.$t("home.withdraw")),1)])]),_:1}),o(e(Y),{modelValue:r.value,"onUpdate:modelValue":D[0]||(D[0]=l=>r.value=l),mode:"md"},{default:i(()=>[o(e(R),{class:"ion-text-capitalize",value:"GameList"},{default:i(()=>[F(T(v.$t("home.allgames")),1)]),_:1}),o(e(R),{class:"ion-text-capitalize",value:"GameRecent"},{default:i(()=>[F(T(v.$t("home.recent")),1)]),_:1}),o(e(R),{class:"ion-text-capitalize",value:"GameFavorite"},{default:i(()=>[F(T(v.$t("home.favorite")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(e(ee),null,{default:i(()=>[(a(),m(pe,{exclude:"GameSub"},[(a(),m(ye(p[r.value]),{class:"bottom-view",gameKey:S[r.value],onReduceHeaderHeight:N},null,40,["gameKey"]))],1024))]),_:1})]),_:1}))}};export{Xe as default};
