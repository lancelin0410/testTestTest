import{_ as e,g as l,a as t,u as o,L as s,C as a,E as n,T as i,o as r,c as d,w as p,d as u,b as c,n as g,q as h,t as m,e as y,m as f,Z as w,aJ as x,a1 as b,f as v,$ as _,i as V}from"./index--xcqUmEY.js";import{_ as C}from"./icon-search-clear.C3jlIHgr.js";import{T}from"./toast.BA8gxJ6P.js";import{p as k,n as L}from"./no-value-password.BkzrDfnG.js";import{h as U,s as I}from"./show.ByLu2JoW.js";const R=e({__name:"ForgetPassword",setup(e){const R=l();t();const B=o().theme.loginV2,P=o(),{t:$}=s();let j=a(R.isChangePassword),N=a(!0),F=n({phone:"",otp:"",password:""}),J=a(null),O=a(0),S=a($("login.button.send"));const z=()=>{N.value=!N.value},G=()=>{F.phone=""},q=async()=>{if(0==O.value){if(""==F.phone)return void T.show($("login.toast.phone"));T.showLoading("Loading");const{code:e,data:l}=await w({tel:F.phone});T.hideLoading(),200==e&&(O.value=l,A())}},A=()=>{S.value=O.value+"s",J.value=setInterval((()=>{O.value>0?(O.value--,S.value=O.value+"s"):(S.value=$("login.button.otp"),O.value=0,clearInterval(J.value))}),1e3)},E=async()=>{if(""==F.phone)return void T.show($("login.toast.phone"));if(""==F.otp)return void T.show($("login.toast.oth"));if(""==F.password)return void T.show($("login.toast.password"));T.showLoading("Loading");const{code:e,data:l}=await x({mobile:F.phone,password:F.password,verificationCode:F.otp});T.hideLoading(),200==e&&(0==j.value?b({url:"/pages/account/Account"}):b({url:"/pages/Login/LoginV2"}))};return(e,l)=>{const t=v,o=_,s=V,a=i("mobile-sub-layout");return r(),d(a,{title:0==u(j)?e.$t("login.header.changePassword"):e.$t("login.header.forgetPassword"),lineHeight:4},{default:p((()=>[c(t,{class:"forget-password-container"},{default:p((()=>[c(t,{class:"login-form-input-item",style:g({background:u(B).inputeItemBg,border:u(B).inputItemBorderColor})},{default:p((()=>[c(t,{class:"login-form-input-item-label",style:g({color:""!=u(F).phone?u(B).text.labelValue:u(B).text.labelNoValue})},{default:p((()=>[h("+91")])),_:1},8,["style"]),c(o,{modelValue:u(F).phone,"onUpdate:modelValue":l[0]||(l[0]=e=>u(F).phone=e),style:g({color:u(B).text.normal}),maxlength:"10","placeholder-style":JSON.stringify({color:u(B).text.tipTextColor}),class:"input-style input-style-width1",placeholder:e.$t("login.placeholder.phone")},null,8,["modelValue","style","placeholder-style","placeholder"]),c(s,{src:C,mode:"scaleToFill",onClick:G,class:"suffix-size1"})])),_:1},8,["style"]),c(t,{class:"login-form-otp-content m-top"},{default:p((()=>[c(t,{style:g({width:0==u(B).isRedUl?"405rpx":"444rpx"})},{default:p((()=>[c(t,{class:"login-form-input-item",style:g({background:u(B).inputeItemBg,border:u(B).inputItemBorderColor})},{default:p((()=>[1==u(B).isRedUl?(r(),d(t,{key:0,class:"login-form-input-item-label",style:g({color:""!=u(F).otp?u(B).text.labelValue:u(B).text.labelNoValue})},{default:p((()=>[h(m(u($)("login.button.otp")),1)])),_:1},8,["style"])):y("",!0),c(o,{type:"text",modelValue:u(F).otp,"onUpdate:modelValue":l[1]||(l[1]=e=>u(F).otp=e),style:g({color:u(B).text.normal,paddingLeft:0==u(B).isRedUl?"46rpx":"0"}),class:f([0==u(B).isRedUl?"input-style-red-width":"input-style-width","input-style"]),"placeholder-style":JSON.stringify({color:u(B).text.tipTextColor}),placeholder:e.$t("login.placeholder.loginOtp")},null,8,["modelValue","style","class","placeholder-style","placeholder"])])),_:1},8,["style"])])),_:1},8,["style"]),c(t,{class:"get-otp-btn",style:g({background:u(B).intervalBg,color:u(B).text.btnTextColor,width:0==u(B).isRedUl?"276rpx":"185rpx"}),onClick:q},{default:p((()=>[h(m(u(S)),1)])),_:1},8,["style"])])),_:1}),c(t,{class:"login-form-input-item m-top",style:g({background:u(B).inputeItemBg,border:u(B).inputItemBorderColor})},{default:p((()=>[1==u(B).isRedUl?(r(),d(t,{key:0,style:{width:"102rpx"}},{default:p((()=>[c(s,{src:""!=u(F).password?u(k):u(L),class:"password-size",mode:"scaleToFill"},null,8,["src"])])),_:1})):y("",!0),c(o,{type:u(N)?"password":"text",modelValue:u(F).password,"onUpdate:modelValue":l[2]||(l[2]=e=>u(F).password=e),style:g({color:u(B).text.normal,paddingLeft:0==u(B).isRedUl?"46rpx":"0"}),"placeholder-style":JSON.stringify({color:u(B).text.tipTextColor}),class:f([0==u(B).isRedUl?"input-style-red-width1":"input-style-width1","input-style"]),placeholder:e.$t("login.placeholder.phone")},null,8,["type","modelValue","style","placeholder-style","class","placeholder"]),c(s,{src:""!=u(N)?u(U):u(I).png,mode:"scaleToFill",onClick:z,class:"suffix-size"},null,8,["src"])])),_:1},8,["style"]),c(t,{class:"submit",style:g({background:u(P).theme.button.linearGolden,color:u(P).theme.button.linearGoldenText}),onClick:E},{default:p((()=>[h(m(u($)("login.button.clickSubmit")),1)])),_:1},8,["style"]),0==u(j)?(r(),d(t,{key:0,class:"tips",style:g({color:u(B).text.normal})},{default:p((()=>[c(t,null,{default:p((()=>[h(m(u($)("login.tips.changePasswordTipTitle")),1)])),_:1}),c(t,null,{default:p((()=>[h(m(u($)("login.tips.changePasswordTipText")),1)])),_:1})])),_:1},8,["style"])):y("",!0)])),_:1})])),_:1},8,["title"])}}},[["__scopeId","data-v-ef4b9a03"]]);export{R as default};
