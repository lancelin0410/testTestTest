import{d as h,j as x,t as y,s as M}from"./@ionic-D6JpvR1m.js";import{u as T,k as A}from"./index-B1bxWljk.js";import{r as c,A as b,b as w,x as B,o as I,G as L,J as k,B as d,I as C,D as u,L as r}from"./@vue-CTzZmrEY.js";import"./@stencil-DBaMOtEh.js";const H={class:"marquee"},U=["innerHTML"],R=["innerHTML"],F={__name:"Marquee",setup($){const{getPublicUrl:p}=T(),m=c(null),a=c(null),l=c(""),f=async()=>{const t=await A();if(t.state==="200"){const e=t.resultData.msgList||[];l.value=e.reduce((n,v)=>{const _=v.msgContent.replaceAll(/<color=#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})>([^<>]+)<\/c>/g,'<span style="color: #$1">$2</span>');return n+='<span style="margin-right: 20px;">'.concat(_,"</span>"),n},"")}else await(await y.create({message:t.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present()};b(()=>{f()});const g=t=>Promise(e=>setTimeout(e,t));let s;const i=async()=>{if(s&&clearInterval(s),a.value.offsetWidth==0||m.value.offsetWidth==0){await g(500),i();return}const t=25e4,e=M().addElement(a.value).duration(t).fromTo("transform","translateX(0)","translateX(-100%)");e.play(),s=setInterval(()=>{e.stop(),e.play()},t/2)};let o;return w(()=>{o=new ResizeObserver(()=>i()),o.observe(a.value.lastChild)}),B(()=>i()),I(()=>{s&&clearInterval(s),o&&o.disconnect()}),(t,e)=>(L(),k("div",H,[d(u(x),null,{default:C(()=>[d(u(h),{slot:"start",class:"notice-icon",src:u(p)("/home/icon-notice.png"),style:{width:"24px",height:"24px",margin:"0 4px 0 0"}},null,8,["src"]),r("div",{slot:"primary",ref_key:"rollBox",ref:m,class:"roll-box"},[r("div",{ref_key:"rollText",ref:a,class:"roll-text",onAnimationstart:e[0]||(e[0]=(...n)=>t.handleAnimationStar&&t.handleAnimationStar(...n))},[r("div",{innerHTML:l.value},null,8,U),r("div",{innerHTML:l.value},null,8,R)],544)],512)]),_:1})]))}};export{F as _};
