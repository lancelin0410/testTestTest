import{d as G,t as H,x as A,y as B,z as C,h as P,A as q,B as Y,C as Z,D as K,i as ee,o as te}from"./@ionic-D6JpvR1m.js";import{g as ae,a as se,b as oe,c as N,u as J,d as ie,s as le,e as ne,f as re,h as V,i as ce,j as me}from"./index-Disua9qA.js";import{_ as O}from"./Marquee-FEtW4Djh.js";import{_ as ue}from"./UserInfo-CdwzuKyl.js";import{r as w,c as ge,G as s,J as b,L as $,B as a,D as e,H as m,P as U,S as E,U as M,O as T,j as de,A as j,I as i,F as z,K as x,M as fe,w as pe,N as F,V as ye,W as ve}from"./@vue-CTzZmrEY.js";import{b as he}from"./vue-router-D889LiZM.js";import{d as Le}from"./pinia-DKQUv1OW.js";import{_ as _e,u as Ge}from"./useMailStore-BGPh45wu.js";import{S as we,A as Se,P as Ie,a as be}from"./swiper-Ba4ICoCD.js";import"./@stencil-DBaMOtEh.js";import"./@capacitor-BXp5o1ZG.js";import"./localforage-qzmIiYbH.js";import"./@adjustcom-Dev-Q0DI.js";import"./vue-i18n-DnF4oqIJ.js";import"./@intlify-BAcCFw_v.js";import"./pinia-plugin-persistedstate-2-DcGv4gw_.js";import"./@awesome-cordova-plugins-CT7d7gQP.js";import"./rxjs-C3tg6S9t.js";import"./tslib-BHBn2Msb.js";const Q=Le("game",()=>{const d=w([]),h=async()=>{const o=await ae();o.state==="200"&&(d.value=o.resultData||[])},n=w([]),u=async()=>{const o=await se();o.state==="200"&&(n.value=o.resultData||[])},g=w([]),L=w([]),r=w([]),p=w([]);return{favoriteGameList:d,getFavoriteGames:h,recentGameList:n,getRecentGames:u,recentSearches:g,popularSearches:L,hotGameList:r,recommendGameList:p,getGameSearchData:async()=>{const o=await oe();return o.state,code===200&&o&&(g.value=o.resultData.recentSearches||[],L.value=o.resultData.popularSearches||[],n.value=o.resultData.recentGameList||[],r.value=o.resultData.hotGameList||[],p.value=o.resultData.recommendGameList||[]),!0}}},{persistedState:{persist:!1}}),ke={key:0,class:"game-name"},X={__name:"GameItem",props:{game:{type:Object,require:!0}},setup(d){const{getPublicUrl:h}=J(),n=d,u=he(),g=N(),L=Q(),r=async()=>{if(n.game.iconType!=2){g.fullLoading=!0;const o=n.game.gameId||n.game.id,y=await ie({gameId:o});if(y.state==="200"){const I=Capacitor.convertFileSrc(y.resultData);await L.getRecentGames(),u.push({name:"GameWeb",query:{gameId:o,url:encodeURIComponent(I)}})}else await(await H.create({message:y.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present();g.fullLoading=!1}},p=ge(()=>L.favoriteGameList.filter(y=>y.gameId==n.game.gameId||y.gameId==n.game.id).length>0),S=async()=>{if(n.game.iconType!=2){g.fullLoading=!0;const o=n.game.gameId||n.game.id,y=await le({gameId:o,opt:p.value?2:1});y.state==="200"?L.getFavoriteGames():await(await H.create({message:y.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present(),g.fullLoading=!1}};return(o,y)=>(s(),b("div",{class:"game-item",onClick:E(r,["stop"])},[$("div",{class:M(["game-image",{large:d.game.imageSize==2}])},[a(e(G),{class:"game-icon",src:d.game.imageUrl},null,8,["src"]),d.game.cornerMark==1?(s(),m(e(G),{key:0,class:"game-tag",src:e(h)("/home/icon-new.png")},null,8,["src"])):U("",!0),d.game.cornerMark==2?(s(),m(e(G),{key:1,class:"game-tag",src:e(h)("/home/icon-best.png")},null,8,["src"])):U("",!0),d.game.iconType!=2?(s(),b("div",{key:2,class:"game-collect",onClick:E(S,["stop"])},[p.value?(s(),m(e(G),{key:0,src:e(h)("/home/icon-collection-select.png"),style:{width:"24px",height:"24px"}},null,8,["src"])):(s(),m(e(G),{key:1,src:e(h)("/home/icon-collection-normal.png"),style:{width:"24px",height:"24px"}},null,8,["src"]))])):U("",!0)],2),d.game.imageSize!=2?(s(),b("div",ke,T(d.game.name),1)):U("",!0)]))}},De=["onClick"],Te={__name:"GameList",emits:["reduceHeaderHeight"],setup(d,{emit:h}){const n=N(),{preLoadImg:u}=V(),g=w(null),L=w(null),r=de({}),p=w(1),S=w([]);let o=!1;const y=h;j(async()=>await I());const I=async()=>{const l=await ne();if(l.state==="200"){S.value=l.resultData.labelList||[],p.value=Number(S.value[0].labelId);const _=l.resultData.firstLabelGameList,f=l.resultData.categoryList;S.value[0].gameList=l.resultData.gameAndCategoryList.map(t=>{if(t.iconType==1){const c=_.filter(k=>k.status&&k.gameId==t.id);t.name=c.length>0?c[0].gameName:""}if(t.iconType==2){const c=f.filter(k=>k.categoryId==t.id);t.name=c.length>0?c[0].categoryName:""}return t});for(const[t,c]of S.value[0].gameList.entries())t<=12&&await u(c.imageUrl);n.startLoading=!1;for(const[t,c]of S.value.entries())u(c.imageUrlSelected),u(c.imageUrlUnselected),t>0&&(c.gameList=await R(c.labelId),c.gameList.forEach(k=>u(k.imageUrl)))}else await(await H.create({message:l.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present()},R=async l=>{const _=await re({labelId:l});if(_.state==="200"){const f=_.resultData.gameList.filter(t=>t.status)||[];return _.resultData.gameAndCategoryList.map(t=>{const c=f.filter(k=>k.status&&k.gameId==t.id);return t.name=c.length>0?c[0].gameName:"",t}).filter(t=>t.imageUrl)}else return await(await H.create({message:_.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present(),[]},v=l=>{o=!0,p.value=Number(l),r[l].$el.scrollIntoView({behavior:"smooth"})},D=l=>{const _=g.value.$el.offsetHeight,f=L.value.$el.offsetHeight;if(_<f&&l.target.scrollTop>0&&y("reduceHeaderHeight",_-f),l.target.scrollTop<8&&y("reduceHeaderHeight",0),o){const t=r[p.value].$el.offsetTop,c=t+r[p.value].$el.offsetHeight;t<=l.target.scrollTop&&l.target.scrollTop<=c&&(o=!1)}else for(const t in r)r[t].$el.offsetTop<=l.target.scrollTop&&(p.value=Number(t))};return(l,_)=>(s(),m(e(P),{ref_key:"gameList",ref:g,class:"game-list"},{default:i(()=>[a(e(A),null,{default:i(()=>[a(e(B),{class:"ion-justify-content-start"},{default:i(()=>[a(e(C),{class:"game-menu",ref_key:"gameMenu",ref:L,size:"2.2"},{default:i(()=>[(s(!0),b(z,null,x(S.value,f=>(s(),b("div",{key:f.labelId,class:"game-label",onClick:t=>v(f.labelId)},[a(fe,{name:"fade"},{default:i(()=>[p.value==Number(f.labelId)?(s(),m(e(G),{key:0,src:f.imageUrlSelected,class:"game-img"},null,8,["src"])):(s(),m(e(G),{key:1,src:f.imageUrlUnselected,class:"game-img"},null,8,["src"]))]),_:2},1024)],8,De))),128))]),_:1},512),a(e(C),{size:"9.8",class:"games",onScroll:D},{default:i(()=>[(s(!0),b(z,null,x(S.value,f=>(s(),m(e(B),{ref_for:!0,ref:t=>r[f.labelId]=t,key:f.labelId,class:"ion-justify-content-start"},{default:i(()=>[(s(!0),b(z,null,x(f.gameList,t=>(s(),m(e(C),{size:t.imageSize==2?12:t.imageSize==3?8:4},{default:i(()=>[a(X,{game:t},null,8,["game"])]),_:2},1032,["size"]))),256))]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},512))}},W={__name:"GameSub",props:{gameKey:{type:String,require:!0}},setup(d){const h=d,n=N(),u=Q(),{preLoadImg:g}=V();return j(async()=>{n.fullLoading=!0,h.gameKey=="recentGameList"&&await u.getRecentGames(),h.gameKey=="favoriteGameList"&&await u.getFavoriteGames();for(const[L,r]of u[h.gameKey].entries())L<=16?await g(r.imageUrl):g(r.imageUrl);n.fullLoading=!1}),(L,r)=>(s(),m(e(P),{class:"game-sub"},{default:i(()=>[e(n).fullLoading||e(u)[d.gameKey].length==0?(s(),m(_e,{key:0,class:"no-data"})):(s(),m(e(A),{key:1},{default:i(()=>[a(e(B),{class:"ion-justify-content-start"},{default:i(()=>[(s(!0),b(z,null,x(e(u)[d.gameKey],p=>(s(),m(e(C),{size:"3"},{default:i(()=>[a(X,{game:p},null,8,["game"])]),_:2},1024))),256))]),_:1})]),_:1}))]),_:1}))}},Ue={key:0,class:"activity-icon"},Ce={class:"activity-icon"},$e={class:"item-button"},ze={class:"item-button"},Ye={__name:"Home",setup(d){const h=N(),n=Ge(),u=ce(),{getPublicUrl:g}=J(),{preLoadImg:L}=V(),r=w("GameList"),p={GameList:Te,GameRecent:W,GameFavorite:W},S={GameList:null,GameRecent:"recentGameList",GameFavorite:"favoriteGameList"},o=w([]),y=async()=>{const v=await me();v.state==="200"?o.value=v.resultData.bannerList||[]:await(await H.create({message:v.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present()};j(async()=>{await y();for(const[v,D]of o.value.entries())v<=1&&await L(D.imageUrl);await n.getMailList()}),pe(r,()=>I.value=!1);const I=w(!1),R=v=>{I.value=v<0};return(v,D)=>(s(),m(e(P),{class:"home"},{default:i(()=>[a(e(ee),null,{default:i(()=>[a(e(A),{style:{padding:"0",position:"sticky",top:"0","z-index":"2"}},{default:i(()=>[a(e(B),{class:"ion-justify-content-between ion-align-items-center"},{default:i(()=>[a(e(C),{size:I.value?3:4},{default:i(()=>[a(e(G),{src:e(h).imgLogo.headerLogo,style:{width:"100%",margin:"auto"}},null,8,["src"])]),_:1},8,["size"]),a(e(C),{style:{position:"relative"}},{default:i(()=>[a(O,{class:M({simplify:I.value})},null,8,["class"])]),_:1}),a(e(C),{size:"auto",style:{display:"flex"}},{default:i(()=>[e(u).isShowTurnplate?(s(),b("div",Ue,[a(e(G),{src:e(g)("/home/icon-home-game.png")},null,8,["src"]),e(u).turnplate.totalRemainTimes>0?(s(),m(e(q),{key:0,class:"activity-icon-tag"},{default:i(()=>[F(T(e(u).turnplate.totalRemainTimes||10),1)]),_:1})):U("",!0)])):U("",!0),$("div",Ce,[a(e(G),{src:e(g)("/home/icon-mail.png"),"router-link":"/account/mail"},null,8,["src"]),e(n).hasUnread?(s(),m(e(q),{key:0,class:"activity-icon-tag"})):U("",!0)])]),_:1})]),_:1})]),_:1}),a(e(we),{class:M({simplify:I.value}),modules:[e(Se),e(Ie),e(Y)],centeredSlides:!0,pagination:{clickable:!0},autoplay:!1,loop:!0,lazyPreloadPrevNext:1},{default:i(()=>[(s(!0),b(z,null,x(o.value,(l,_)=>(s(),m(e(be),{key:"banner_".concat(_)},{default:i(()=>[a(e(G),{src:l.imageUrl,loading:"lazy"},null,8,["src"])]),_:2},1024))),128))]),_:1},8,["class","modules"]),a(O,{class:M([{simplify:I.value},"main"])},null,8,["class"]),a(ue,{class:"user-info"},{default:i(()=>[$("div",$e,[a(e(G),{src:e(g)("/home/icon-deposit.png"),style:{height:"8vw",margin:"auto"}},null,8,["src"]),$("div",null,T(v.$t("home.deposit")),1)]),$("div",ze,[a(e(G),{src:e(g)("/home/icon-withdraw.png"),style:{height:"8vw",margin:"auto"}},null,8,["src"]),$("div",null,T(v.$t("home.withdraw")),1)])]),_:1}),a(e(Z),{modelValue:r.value,"onUpdate:modelValue":D[0]||(D[0]=l=>r.value=l),mode:"md"},{default:i(()=>[a(e(K),{class:"ion-text-capitalize",value:"GameList"},{default:i(()=>[F(T(v.$t("home.allgames")),1)]),_:1}),a(e(K),{class:"ion-text-capitalize",value:"GameRecent"},{default:i(()=>[F(T(v.$t("home.recent")),1)]),_:1}),a(e(K),{class:"ion-text-capitalize",value:"GameFavorite"},{default:i(()=>[F(T(v.$t("home.favorite")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(e(te),null,{default:i(()=>[(s(),m(ye,{exclude:"GameSub"},[(s(),m(ve(p[r.value]),{class:"bottom-view",gameKey:S[r.value],onReduceHeaderHeight:R},null,40,["gameKey"]))],1024))]),_:1})]),_:1}))}};export{Ye as default};
