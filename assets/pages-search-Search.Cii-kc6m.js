import{_ as e,K as t,u as a,D as s,o as l,c as r,w as c,k as o,F as n,l as d,m as i,n as g,d as u,x as m,b as p,p as y,t as h,f,a3 as x,V as _,W as I,R as b,I as k,J as C,y as L,S as w,i as S}from"./index-D6FzdE0N.js";import{o as j}from"./uni-app.es.7veTDdZF.js";import{S as D}from"./SearchInput.D-nmodi3.js";import{u as G,H as N}from"./HomeGamesItem.BjH76CRl.js";import{a as R,d as v}from"./game._ReWUCH7.js";import{N as F}from"./NoDataSearch.Ya-trXOw.js";import{P as H}from"./Pageable._BHz5Qc4.js";import"./icon-search-clear.C3jlIHgr.js";import"./no-data-withdraw.BQz0OKhQ.js";const P=e({__name:"SearchSegment",emits:["change"],setup(e,{emit:x}){const{t:_}=t(),I=a(),b=x,k=s({tabList:[_("search.tabs.tab1"),_("search.tabs.tab2"),_("search.tabs.tab3")],selectIndex:0});return(e,t)=>{const a=f;return l(),r(a,{class:"search-segment-container",style:g({background:u(I).theme.tabsRound.bgColor})},{default:c((()=>[(l(!0),o(n,null,d(k.tabList,((e,t)=>(l(),r(a,{key:t,class:i(["segment-item",{select:t===k.selectIndex}]),style:g({color:t===k.selectIndex?u(I).theme.tabsRound.selectTextColor:u(I).theme.tabsRound.textColor,background:t===k.selectIndex?u(I).theme.tabsRound.selectBgColor:""}),onClick:m((e=>(e=>{k.selectIndex=e,b("change",e)})(t)),["stop"])},{default:c((()=>[p(a,null,{default:c((()=>[y(h(e),1)])),_:2},1024)])),_:2},1032,["class","style","onClick"])))),128))])),_:1},8,["style"])}}},[["__scopeId","data-v-cfb4d03c"]]),U=e({__name:"Search",setup(e){const t=a(),i=G(),y=s({segmentIndex:0,categoryName:"",selectCategoryId:0,categoryList:[],current:1,total:1}),h=x((()=>{for(let e=0;e<y.categoryList.length;e++){const t=y.categoryList[e];if(t.categoryId===y.selectCategoryId)return t.gameList||[]}return[]}));j((e=>{y.selectCategoryId=Number(e.categoryId),y.categoryName=e.categoryName||"",U(),J()}));const U=async()=>{await i.getGameSearchData()},J=async()=>{_({title:"Loading"});const{code:e,data:t}=await R();I(),200===e&&(y.categoryList=t&&t.categoryList||[],K(y.selectCategoryId))},K=async e=>{_({title:"Loading"});const{code:t,data:a}=await v({categoryId:e,page:y.current});I(),200===t&&(y.total=a.totalPage,y.categoryList.forEach((t=>{t.categoryId===e&&(t.gameList=a.gameList||[])})))},$=()=>{L({url:"/pages/search/SearchResult"})},B=e=>{y.segmentIndex=e},E=e=>{y.current=e,K(y.selectCategoryId)};return(e,a)=>{const s=f,x=S,_=w,I=b("mobile-sub-layout");return l(),r(I,{title:y.categoryName||e.$t("search.title")},{default:c((()=>[p(s,{class:"search-container",style:g({"background-color":u(t).theme.bgColor})},{default:c((()=>[p(u(D),{readOnly:"",onSearchClick:$}),p(s,{class:"plr30 ptb30"},{default:c((()=>[p(P,{onChange:B})])),_:1}),k(p(s,{class:"search-all-container"},{default:c((()=>[p(s,{class:"search-all--left flex-column flex-acenter"},{default:c((()=>[(l(!0),o(n,null,d(y.categoryList,((e,t)=>(l(),r(s,{key:t,onClick:m((t=>(e=>{y.selectCategoryId=e.categoryId,y.current=1,y.total=1,K(e.categoryId)})(e)),["stop"])},{default:c((()=>[y.selectCategoryId===e.categoryId?(l(),r(x,{key:0,src:e.imageUrlSelected,mode:"aspectFit",style:{width:"120rpx",height:"120rpx"}},null,8,["src"])):(l(),r(x,{key:1,src:e.imageUrlUnselected,mode:"aspectFit",style:{width:"120rpx",height:"120rpx"}},null,8,["src"]))])),_:2},1032,["onClick"])))),128))])),_:1}),p(s,{class:"search-all-right"},{default:c((()=>[p(_,{class:"scroll-view-style","scroll-y":!0,"scroll-with-animation":!0},{default:c((()=>[p(s,{class:"flex-wrap"},{default:c((()=>[(l(!0),o(n,null,d(h.value,((t,a)=>(l(),r(s,{key:a,class:"mb24",onClick:m((a=>e.handleGameClick(t)),["stop"])},{default:c((()=>[p(N,{style:{width:"190rpx",height:"195rpx",padding:"0rpx 15rpx"},itemData:t},null,8,["itemData"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),p(s,{class:"flex-scenter ptb16"},{default:c((()=>[p(H,{total:y.total,current:y.current,onChange:E},null,8,["total","current"])])),_:1})])),_:1})])),_:1},512),[[C,0===y.segmentIndex]]),k(p(s,null,{default:c((()=>[u(i).hotGameList.length?(l(),r(s,{key:0,style:{padding:"24rpx 15rpx","padding-top":"0rpx"}},{default:c((()=>[p(s,{class:"flex-wrap"},{default:c((()=>[(l(!0),o(n,null,d(u(i).hotGameList,((e,t)=>(l(),r(s,{key:t,style:{"margin-bottom":"20rpx"}},{default:c((()=>[p(N,{itemData:e,style:{width:"180rpx",height:"185rpx",padding:"0rpx 15rpx"}},null,8,["itemData"])])),_:2},1024)))),128))])),_:1})])),_:1})):(l(),r(s,{key:1},{default:c((()=>[p(u(F),{title:e.$t("search.message.norecord")},null,8,["title"])])),_:1}))])),_:1},512),[[C,1===y.segmentIndex]]),k(p(s,null,{default:c((()=>[u(i).recentGameList.length?(l(),r(s,{key:0,style:{padding:"24rpx 15rpx","padding-top":"0rpx"}},{default:c((()=>[p(s,{class:"flex-wrap"},{default:c((()=>[(l(!0),o(n,null,d(u(i).recentGameList,((e,t)=>(l(),r(s,{key:t,style:{"margin-bottom":"20rpx"}},{default:c((()=>[p(N,{itemData:e,style:{width:"180rpx",height:"185rpx",padding:"0rpx 15rpx"}},null,8,["itemData"])])),_:2},1024)))),128))])),_:1})])),_:1})):(l(),r(s,{key:1},{default:c((()=>[p(u(F),{title:"You haven't played the game yet"})])),_:1}))])),_:1},512),[[C,2===y.segmentIndex]])])),_:1},8,["style"])])),_:1},8,["title"])}}},[["__scopeId","data-v-f214a604"]]);export{U as default};
