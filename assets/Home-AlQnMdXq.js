import{r as w,c as ee,H as o,K as k,M as D,C as a,E as e,I as m,Q as $,U as O,V as B,P as T,j as te,B as j,w as X,J as s,F as x,L as H,N as ae,a as se,R as oe,O as R,W as ie,X as le}from"./@vue-Byjcq-FP.js";import{d as G,t as F,x as P,y as N,z as U,h as q,A as W,B as ne,C as re,D as A,i as ce,o as me}from"./@ionic-qvL_eljm.js";import{g as ue,a as ge,b as de,c as K,u as V,d as fe,s as pe,e as ye,f as he,h as ve,i as Le,j as _e}from"./index-P6cHJn6P.js";import{_ as J}from"./Marquee-cTf2ea2r.js";import{_ as we}from"./UserInfo-CK2aoPwt.js";import{b as Ge}from"./vue-router-CLGTjHYu.js";import{d as Se}from"./pinia-DpQ9eBLY.js";import{_ as Ie,u as be}from"./useMailStore-BwZAu6dS.js";import{S as ke,A as Ce,P as De,a as Te}from"./swiper-CylKLkDc.js";import"./@stencil-DBaMOtEh.js";import"./@capacitor-BXp5o1ZG.js";import"./ionicons-T4lv_k6t.js";import"./localforage-qzmIiYbH.js";import"./@adjustcom-Dev-Q0DI.js";import"./vue-i18n-CK_WgmAH.js";import"./@intlify-BAcCFw_v.js";import"./pinia-plugin-persistedstate-2-DcGv4gw_.js";import"./@awesome-cordova-plugins-CT7d7gQP.js";import"./rxjs-C3tg6S9t.js";import"./tslib-BHBn2Msb.js";const Y=Se("game",()=>{const u=w([]),v=async()=>{const t=await ue();t.state==="200"&&(u.value=t.resultData||[])},r=w([]),f=async()=>{const t=await ge();t.state==="200"&&(r.value=t.resultData||[])},c=w([]),L=w([]),g=w([]),p=w([]);return{favoriteGameList:u,getFavoriteGames:v,recentGameList:r,getRecentGames:f,recentSearches:c,popularSearches:L,hotGameList:g,recommendGameList:p,getGameSearchData:async()=>{const t=await de();return t.state,code===200&&t&&(c.value=t.resultData.recentSearches||[],L.value=t.resultData.popularSearches||[],r.value=t.resultData.recentGameList||[],g.value=t.resultData.hotGameList||[],p.value=t.resultData.recommendGameList||[]),!0}}},{persistedState:{persist:!1}}),Ue={key:0,class:"game-name"},Z={__name:"GameItem",props:{game:{type:Object,require:!0}},setup(u){const{getImgUrl:v}=V(),r=u,f=Ge(),c=K(),L=Y(),g=async()=>{if(r.game.iconType!=2){c.fullLoading=!0;const t=r.game.gameId||r.game.id,y=await fe({gameId:t});if(y.state==="200"){const _=Capacitor.convertFileSrc(y.resultData);await L.getRecentGames(),f.push({name:"GameWeb",query:{gameId:t,url:encodeURIComponent(_)}})}else await(await F.create({message:y.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present();c.fullLoading=!1}},p=ee(()=>L.favoriteGameList.filter(y=>y.gameId==r.game.gameId||y.gameId==r.game.id).length>0),S=async()=>{if(r.game.iconType!=2){c.fullLoading=!0;const t=r.game.gameId||r.game.id,y=await pe({gameId:t,opt:p.value?2:1});y.state==="200"?L.getFavoriteGames():await(await F.create({message:y.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present(),c.fullLoading=!1}};return(t,y)=>(o(),k("div",{class:"game-item",onClick:O(g,["stop"])},[D("div",{class:B(["game-image",{large:u.game.imageSize==2}])},[a(e(G),{class:"game-icon",src:u.game.imageUrl},null,8,["src"]),u.game.cornerMark==1?(o(),m(e(G),{key:0,class:"game-tag",src:e(v)("/home/icon-new.png")},null,8,["src"])):$("",!0),u.game.cornerMark==2?(o(),m(e(G),{key:1,class:"game-tag",src:e(v)("/home/icon-best.png")},null,8,["src"])):$("",!0),u.game.iconType!=2?(o(),k("div",{key:2,class:"game-collect",onClick:O(S,["stop"])},[p.value?(o(),m(e(G),{key:0,src:e(v)("/home/icon-collection-select.png"),style:{width:"24px",height:"24px"}},null,8,["src"])):(o(),m(e(G),{key:1,src:e(v)("/home/icon-collection-normal.png"),style:{width:"24px",height:"24px"}},null,8,["src"]))])):$("",!0)],2),u.game.imageSize!=2?(o(),k("div",Ue,T(u.game.name),1)):$("",!0)]))}},$e=["onClick"],ze={__name:"GameList",emits:["reduceHeaderHeight"],setup(u,{emit:v}){const r=K(),f=ye(),{preLoadImg:c}=V(),L=w(null),g=w(null),p=te({}),S=w(1),t=w([]);let y=!1;const _=v;j(async()=>{f.isLogin&&await M()}),X(()=>f.isLogin,async n=>{n&&await M()});const M=async()=>{const n=await he();if(n.state==="200"){t.value=n.resultData.labelList||[],S.value=Number(t.value[0].labelId);const I=n.resultData.firstLabelGameList,d=n.resultData.categoryList;t.value[0].gameList=n.resultData.gameAndCategoryList.map(i=>{if(i.iconType==1){const l=I.filter(b=>b.status&&b.gameId==i.id);i.name=l.length>0?l[0].gameName:""}if(i.iconType==2){const l=d.filter(b=>b.categoryId==i.id);i.name=l.length>0?l[0].categoryName:""}return i});for(const[i,l]of t.value[0].gameList.entries())i<=12&&await c(l.imageUrl);r.startLoading=!1;for(const[i,l]of t.value.entries())c(l.imageUrlSelected),c(l.imageUrlUnselected),i>0&&(l.gameList=await h(l.labelId),l.gameList.forEach(b=>c(b.imageUrl)))}else await(await F.create({message:n.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present()},h=async n=>{var d;const I=await ve({labelId:n});if(I.state==="200"){const i=((d=I.resultData.gameList)==null?void 0:d.filter(l=>l.status))||[];return I.resultData.gameAndCategoryList.map(l=>{const b=i.filter(E=>E.status&&E.gameId==l.id);return l.name=b.length>0?b[0].gameName:"",l}).filter(l=>l.imageUrl)}else return await(await F.create({message:I.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present(),[]},C=n=>{y=!0,S.value=Number(n),p[n].$el.scrollIntoView({behavior:"smooth"})},z=n=>{const I=L.value.$el.offsetHeight,d=g.value.$el.offsetHeight;if(I<d&&n.target.scrollTop>0&&_("reduceHeaderHeight",I-d),n.target.scrollTop<4&&_("reduceHeaderHeight",0),y){const i=p[S.value].$el.offsetTop,l=i+p[S.value].$el.offsetHeight;i<=n.target.scrollTop&&n.target.scrollTop<=l&&(y=!1)}else for(const i in p)p[i].$el.offsetTop<=n.target.scrollTop&&(S.value=Number(i))};return(n,I)=>(o(),m(e(q),{ref_key:"gameList",ref:L,class:"game-list"},{default:s(()=>[a(e(P),null,{default:s(()=>[a(e(N),{class:"ion-justify-content-start"},{default:s(()=>[a(e(U),{class:"game-menu",ref_key:"gameMenu",ref:g,size:"2.2"},{default:s(()=>[(o(!0),k(x,null,H(t.value,d=>(o(),k("div",{key:d.labelId,class:"game-label",onClick:i=>C(d.labelId)},[a(ae,{name:"fade"},{default:s(()=>[S.value==Number(d.labelId)?(o(),m(e(G),{key:0,src:d.imageUrlSelected,class:"game-img"},null,8,["src"])):(o(),m(e(G),{key:1,src:d.imageUrlUnselected,class:"game-img"},null,8,["src"]))]),_:2},1024)],8,$e))),128))]),_:1},512),a(e(U),{size:"9.8",class:"games",onScroll:z},{default:s(()=>[(o(!0),k(x,null,H(t.value,d=>(o(),m(e(N),{ref_for:!0,ref:i=>p[d.labelId]=i,key:d.labelId,class:"ion-justify-content-start"},{default:s(()=>[(o(!0),k(x,null,H(d.gameList,i=>(o(),m(e(U),{size:i.imageSize==2?12:i.imageSize==3?8:4},{default:s(()=>[a(Z,{game:i},null,8,["game"])]),_:2},1032,["size"]))),256))]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1},512))}},Q={__name:"GameSub",props:{gameKey:{type:String,require:!0}},setup(u){const v=u,r=K(),f=Y(),{preLoadImg:c}=V();return j(async()=>{r.fullLoading=!0,v.gameKey=="recentGameList"&&await f.getRecentGames(),v.gameKey=="favoriteGameList"&&await f.getFavoriteGames();for(const[L,g]of f[v.gameKey].entries())L<=16?await c(g.imageUrl):c(g.imageUrl);r.fullLoading=!1}),(L,g)=>(o(),m(e(q),{class:"game-sub"},{default:s(()=>[e(r).fullLoading||e(f)[u.gameKey].length==0?(o(),m(Ie,{key:0,class:"no-data"})):(o(),m(e(P),{key:1},{default:s(()=>[a(e(N),{class:"ion-justify-content-start"},{default:s(()=>[(o(!0),k(x,null,H(e(f)[u.gameKey],p=>(o(),m(e(U),{size:"3"},{default:s(()=>[a(Z,{game:p},null,8,["game"])]),_:2},1024))),256))]),_:1})]),_:1}))]),_:1}))}},xe={class:"activity-icon"},He={class:"activity-icon"},Fe={class:"item-button"},Me={class:"item-button"},st={__name:"Home",setup(u){const v=K(),r=be(),f=Le(),{getImgUrl:c,preLoadImg:L}=V(),g=w("GameList"),p={GameList:ze,GameRecent:Q,GameFavorite:Q},S={GameList:null,GameRecent:"recentGameList",GameFavorite:"favoriteGameList"},t=w([]),y=async()=>{const h=await _e();h.state==="200"?t.value=h.resultData.bannerList||[]:await(await F.create({message:h.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present()};j(async()=>{await y();for(const[h,C]of t.value.entries())h<=1&&await L(C.imageUrl);await r.getMailList()}),X(g,()=>_.value=!1);const _=w(!1),M=h=>{_.value=h<0};return(h,C)=>(o(),m(e(q),{class:"home"},{default:s(()=>[a(e(ce),null,{default:s(()=>[a(e(P),{style:{padding:"0",position:"sticky",top:"0","z-index":"2"}},{default:s(()=>[a(e(N),{class:"ion-justify-content-between ion-align-items-center",style:{"min-height":"5vh"}},{default:s(()=>[a(e(U),{size:_.value?3:4.8},{default:s(()=>[a(e(G),{src:e(v).imgLogo.headerLogo,style:{height:"100%",margin:"auto"}},null,8,["src"])]),_:1},8,["size"]),a(e(U),{style:{position:"relative"}},{default:s(()=>[a(J,{class:B({simplify:_.value})},null,8,["class"])]),_:1}),a(e(U),{size:"auto",style:{display:"flex"}},{default:s(()=>[se(D("div",xe,[a(e(G),{src:e(c)("/home/icon-home-game.png")},null,8,["src"]),e(f).turnplate.totalRemainTimes>0?(o(),m(e(W),{key:0,class:"activity-icon-tag"},{default:s(()=>[R(T(e(f).turnplate.totalRemainTimes||10),1)]),_:1})):$("",!0)],512),[[oe,e(f).isShowTurnplate]]),D("div",He,[a(e(G),{src:e(c)("/home/icon-mail.png"),"router-link":"/account/mail"},null,8,["src"]),e(r).hasUnread?(o(),m(e(W),{key:0,class:"activity-icon-tag"})):$("",!0)])]),_:1})]),_:1})]),_:1}),a(e(ke),{class:B({simplify:_.value}),modules:[e(Ce),e(De),e(ne)],centeredSlides:!0,pagination:{clickable:!0},autoplay:!0,loop:!0,lazyPreloadPrevNext:1},{default:s(()=>[(o(!0),k(x,null,H(t.value,(z,n)=>(o(),m(e(Te),{key:"banner_".concat(n)},{default:s(()=>[a(e(G),{src:z.imageUrl,loading:"lazy"},null,8,["src"])]),_:2},1024))),128))]),_:1},8,["class","modules"]),a(J,{class:B([{simplify:_.value},"main"])},null,8,["class"]),a(we,{class:"user-info"},{default:s(()=>[D("div",Fe,[a(e(G),{src:e(c)("/home/icon-deposit.png"),style:{height:"8vw",margin:"auto"},"router-link":"/account/deposit"},null,8,["src"]),D("div",null,T(h.$t("home.deposit")),1)]),D("div",Me,[a(e(G),{src:e(c)("/home/icon-withdraw.png"),style:{height:"8vw",margin:"auto"},"router-link":"/account/withdraw"},null,8,["src"]),D("div",null,T(h.$t("home.withdraw")),1)])]),_:1}),a(e(re),{modelValue:g.value,"onUpdate:modelValue":C[0]||(C[0]=z=>g.value=z),mode:"md"},{default:s(()=>[a(e(A),{class:"ion-text-capitalize",value:"GameList"},{default:s(()=>[R(T(h.$t("home.allgames")),1)]),_:1}),a(e(A),{class:"ion-text-capitalize",value:"GameRecent"},{default:s(()=>[R(T(h.$t("home.recent")),1)]),_:1}),a(e(A),{class:"ion-text-capitalize",value:"GameFavorite"},{default:s(()=>[R(T(h.$t("home.favorite")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(e(me),null,{default:s(()=>[(o(),m(ie,{exclude:"GameSub"},[(o(),m(le(p[g.value]),{class:"bottom-view",gameKey:S[g.value],onReduceHeaderHeight:M},null,40,["gameKey"]))],1024))]),_:1})]),_:1}))}};export{st as default};
