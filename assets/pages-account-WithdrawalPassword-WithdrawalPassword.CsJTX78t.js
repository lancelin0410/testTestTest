import{a6 as a,_ as e,K as o,u as t,g as s,a as l,D as d,B as r,R as i,o as w,c,w as n,b as u,n as m,d as p,k as h,l as O,F as f,p as j,t as b,Y as A,ao as g,f as D,i as N,Z as y,m as C,e as v}from"./index-D6FzdE0N.js";import{_ as P}from"./segmentation.CKFwtPwF.js";import{s as I}from"./account.u2cO57bq.js";import{T as z}from"./toast.BErREgqV.js";const B="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAMAAAAOusbgAAAAllBMVEUAAAD0OTn1ODj1OTn0OTn0ODj8JCT1OTn1OTn0ODj0Nzf1ODj1ODj0ODj0Njb1ODj1ODj1NzfzNjbvNjb0ODj0ODj0ODj0ODj0Nzf1Njb1OTn0ODj0OTn0ODj0OTn0ODj0ODj1NzfzODj1OTn0Njb0ODj0ODj0Nzf0ODj0ODjwMjLuMzP0OTnzODj0Nzf0NzfzOTn0OTmPwKljAAAAMXRSTlMA5kRLh/EG9/rbMXxmUxXhryYgCcKsjUc8LPzs1s20opJuQDYcupmKdVsRD+7HcmCCUA3VcQAAAhZJREFUaN7t2dluo0AQheFjE8yODd6XeM94yTb1/i83Ek0go4ltOhQdjVzfNdKvarcKIUMIIYQQ/63Ofur7yTOM8t+G3owy88HIMlRPH7r0N2dooXF+b0Zf8MIOmrRf0SVek1OHNl3Ri9GMc4+ua7XRhMSjW9wN+O3m9Im3OkbjycQKRwOHPjnwd20qLIIUpX7Uc6mwBq9pOe+j9e9lX5fp3+AUe5SzQ3wlGdCHExg9FeOmuCCgnOODzZFyvT4uihxSFn0wSRxShrhm/PHYgfugBzf28YkUdwoWFimtGDeMSFmCxSMpFm7pLEjxwaCtMUa7uAwMepSZJahgmT+8R22xqzPEhJQAtYWkjFHJIl80bCfdQjUBKTHqeqHMCtVMuTZ2Qso7KpozvR4jUqaaa+6J6/3QR0W/KNNFTfkWfAH0bpeLG9gH2BRHVI9vZbaoKrUUCHFZP1x2WzV0B8Ee37DtUm3OG7RFLnEYQVNqE48IelbExIOWjkNcdtDhE5sjdIyJzQN0WBKW8D2GvdFmc1gYDzshMifbcDhCbuIaDa9QWBsNb1GYGg2fUXJNhjso2RKWsIQlLGEJ33f4jJJjMrxDISWT4TUKgdGw4yOX2EbDNN8is+sa/5JYhuPx+3B2R99OzYQnxCaAjpjYRNDySkycZ/zMj3zQ/xeExWMfP1J+jaHPGlBN3gbfE0/aNWxTCCGEEEKIzB+K9eBsXfmYdAAAAABJRU5ErkJggg==",T=a.global.t,M=[{label:T("account.withdrawalPassword.label.password"),icon:B,fieldName:"withdrawPasswd",placeholder:T("account.withdrawalPassword.label.password"),type:"password"},{label:T("account.withdrawalPassword.label.repeatPassword"),icon:B,fieldName:"withdrawPasswdRepeat",placeholder:T("account.withdrawalPassword.label.repeatPassword"),type:"password"}],x=e({__name:"WithdrawalPassword",setup(a){const{t:e}=o(),B=t().theme.account.withdrawalPassword,T=t(),x=s(),R=l();let U=d({withdrawPasswd:"",withdrawPasswdRepeat:"",mobile:x.userInfo.mobile?x.userInfo.mobile.substring(2):"",verificationCode:"",canModifyPwd:!x.userInfo.mobile}),E=r(null),k=r(0),H=r(e("account.button.otp"));const Q=async()=>{if(0==k.value){if(""==U.mobile)return void z.show(e("account.withdrawalPassword.toast.phone"));const{code:a,data:o}=await A({tel:U.mobile});200==a&&(k.value=o,V())}},V=()=>{H.value=k.value+"s",E.value=setInterval((()=>{k.value>0?(k.value--,H.value=k.value+"s"):(H.value=e("account.button.otp"),k.value=0,clearInterval(E.value))}),1e3)},J=async()=>{if(""==U.withdrawPasswd)return void z.show(e("account.withdrawalPassword.toast.withdrawPasswd"));if(U.withdrawPasswd!==U.withdrawPasswdRepeat)return void z.show(e("account.withdrawalPassword.toast.withdrawPasswdRepeat"));if(""==U.mobile)return void z.show(e("account.withdrawalPassword.toast.phone"));if(""==U.verificationCode)return void z.show(e("account.withdrawalPassword.toast.verificationCode"));z.showLoading("Loading");const{code:a,data:o}=await I({withdrawPasswd:U.withdrawPasswd,withdrawPasswdRepeat:U.withdrawPasswdRepeat,mobile:U.canModifyPwd?U.mobile:null,verificationCode:U.verificationCode});z.hideLoading(),200==a&&(z.showSuccess(),setTimeout((()=>{g()}),1e3))};return(a,e)=>{const o=D,t=N,s=y,l=i("mobile-sub-layout");return w(),c(l,{title:a.$t("account.header.withdrawalPasswordTitle"),lineHeight:4},{default:n((()=>[u(o,{class:"withdraw-password-body"},{default:n((()=>[u(o,{class:"withdraw-password-content",style:m({backgroundColor:p(B).lightBgColor})},{default:n((()=>[(w(!0),h(f,null,O(p(M),((a,e)=>(w(),h(f,{key:e},[u(o,{class:C(["withdraw-password-item-lable",0!=e?"m-top":""]),style:m({color:p(B).text.normal})},{default:n((()=>[j(b(a.label),1)])),_:2},1032,["style","class"]),u(o,{class:"withdraw-password-item-value",style:m({backgroundColor:""!=p(U)[a.fieldName]?p(B).passwordItemBgColor:p(B).passwordItemNoValueBgColor,borderColor:""!=p(U)[a.fieldName]?p(B).passwordItemBorderColor:p(B).passwordItemNoValueBorderColor})},{default:n((()=>[u(o,{class:"withdraw-password-item-value-icon-content"},{default:n((()=>[u(t,{class:"withdraw-password-item-value-icon",mode:"aspectFit",src:0==p(B).isShowDivisionImage&&""!=p(U)[a.fieldName]?a.icon:p("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAMAAAAOusbgAAAAllBMVEUAAAD0OTn1ODj1OTn0OTn0ODj8JCT1OTn1OTn0ODj0Nzf1ODj1ODj0ODj0Njb1ODj1ODj1NzfzNjbvNjb0ODj0ODj0ODj0ODj0Nzf1Njb1OTn0ODj0OTn0ODj0OTn0ODj0ODj1NzfzODj1OTn0Njb0ODj0ODj0Nzf0ODj0ODjwMjLuMzP0OTnzODj0Nzf0NzfzOTn0OTmPwKljAAAAMXRSTlMA5kRLh/EG9/rbMXxmUxXhryYgCcKsjUc8LPzs1s20opJuQDYcupmKdVsRD+7HcmCCUA3VcQAAAhZJREFUaN7t2dluo0AQheFjE8yODd6XeM94yTb1/i83Ek0go4ltOhQdjVzfNdKvarcKIUMIIYQQ/63Ofur7yTOM8t+G3owy88HIMlRPH7r0N2dooXF+b0Zf8MIOmrRf0SVek1OHNl3Ri9GMc4+ua7XRhMSjW9wN+O3m9Im3OkbjycQKRwOHPjnwd20qLIIUpX7Uc6mwBq9pOe+j9e9lX5fp3+AUe5SzQ3wlGdCHExg9FeOmuCCgnOODzZFyvT4uihxSFn0wSRxShrhm/PHYgfugBzf28YkUdwoWFimtGDeMSFmCxSMpFm7pLEjxwaCtMUa7uAwMepSZJahgmT+8R22xqzPEhJQAtYWkjFHJIl80bCfdQjUBKTHqeqHMCtVMuTZ2Qso7KpozvR4jUqaaa+6J6/3QR0W/KNNFTfkWfAH0bpeLG9gH2BRHVI9vZbaoKrUUCHFZP1x2WzV0B8Ee37DtUm3OG7RFLnEYQVNqE48IelbExIOWjkNcdtDhE5sjdIyJzQN0WBKW8D2GvdFmc1gYDzshMifbcDhCbuIaDa9QWBsNb1GYGg2fUXJNhjso2RKWsIQlLGEJ33f4jJJjMrxDISWT4TUKgdGw4yOX2EbDNN8is+sa/5JYhuPx+3B2R99OzYQnxCaAjpjYRNDySkycZ/zMj3zQ/xeExWMfP1J+jaHPGlBN3gbfE0/aNWxTCCGEEEKIzB+K9eBsXfmYdAAAAABJRU5ErkJggg==")},null,8,["src"]),p(B).isShowDivisionImage?(w(),c(t,{key:0,class:"withdraw-password-item-value-segmentation",src:P})):v("",!0)])),_:2},1024),u(s,{type:a.type,style:m({color:p(B).text.inputColor}),"placeholder-style":JSON.stringify({color:p(B).text.placeHolderColor}),modelValue:p(U)[a.fieldName],"onUpdate:modelValue":e=>p(U)[a.fieldName]=e,class:"withdraw-password-item-value-input",placeholder:a.placeholder},null,8,["type","style","placeholder-style","modelValue","onUpdate:modelValue","placeholder"])])),_:2},1032,["style"])],64)))),128)),u(o,{class:"withdraw-password-item-lable m-top",style:m({color:p(B).text.normal})},{default:n((()=>[j(b(a.$t("account.withdrawalPassword.label.phone")),1)])),_:1},8,["style"]),u(o,{class:"withdraw-password-item-value",style:m({backgroundColor:""!=p(U).mobile?p(B).passwordItemBgColor:p(B).passwordItemNoValueBgColor,borderColor:""!=p(U).mobile?p(B).passwordItemBorderColor:p(B).passwordItemNoValueBorderColor})},{default:n((()=>[u(o,{class:"withdraw-password-item-value-icon-content"},{default:n((()=>[u(o,{class:"ft16 withdraw-password-item-value-icon",style:m({color:p(T).theme.text.theme2})},{default:n((()=>[j(b(p(R).phoneNumberPrefix),1)])),_:1},8,["style"]),u(t,{class:"withdraw-password-item-value-segmentation",src:P,mode:"aspectFit"})])),_:1}),u(s,{type:"text",modelValue:p(U).mobile,"onUpdate:modelValue":e[0]||(e[0]=a=>p(U).mobile=a),disabled:!p(U).canModifyPwd,maxlength:"10",style:m({color:p(B).text.inputColor}),"placeholder-style":JSON.stringify({color:p(B).text.placeHolderColor}),class:"withdraw-password-item-value-input",placeholder:a.$t("account.withdrawalPassword.label.phone")},null,8,["modelValue","disabled","style","placeholder-style","placeholder"])])),_:1},8,["style"]),u(o,{class:"m-top withdraw-password-item-code"},{default:n((()=>[u(o,{class:"withdraw-password-item-code-value",style:m({backgroundColor:""!=p(U).verificationCode?p(B).passwordItemBgColor:p(B).passwordItemNoValueBgColor,borderColor:""!=p(U).verificationCode?p(B).passwordItemBorderColor:p(B).passwordItemNoValueBorderColor,width:p(B).getOtpBtn.otpInputWidth})},{default:n((()=>[u(o,{class:"withdraw-password-item-value-icon-content"},{default:n((()=>[u(o,{class:"ft16 withdraw-password-item-value-icon",style:m({color:p(T).theme.text.theme2})},{default:n((()=>[j(" OTP ")])),_:1},8,["style"]),u(t,{class:"withdraw-password-item-value-segmentation",src:P,mode:"aspectFit"})])),_:1}),u(s,{type:"text",modelValue:p(U).verificationCode,"onUpdate:modelValue":e[1]||(e[1]=a=>p(U).verificationCode=a),class:"withdraw-password-item-value-input",style:m({color:p(B).text.inputColor}),"placeholder-style":JSON.stringify({color:p(B).text.placeHolderColor}),placeholder:a.$t("account.withdrawalPassword.label.otpPlaceholder")},null,8,["modelValue","style","placeholder-style","placeholder"])])),_:1},8,["style"]),u(o,{class:"get-otp-btn",style:m({width:p(B).getOtpBtn.width,color:p(B).getOtpBtn.textColor,background:p(B).getOtpBtn.background,backgroundSize:"100% 100%"}),onClick:Q},{default:n((()=>[j(b(p(H)),1)])),_:1},8,["style"])])),_:1})])),_:1},8,["style"])])),_:1}),u(o,{class:"submit-btn-block",style:m({backgroundColor:p(B).btnBlockBgColor})},{default:n((()=>[u(o,{class:"submit-btn",style:m({background:p(B).submitBtnBgColor}),onClick:J},{default:n((()=>[j(b(a.$t("account.button.confirm")),1)])),_:1},8,["style"])])),_:1},8,["style"])])),_:1},8,["title"])}}},[["__scopeId","data-v-a91b1d3a"]]);export{x as default};
