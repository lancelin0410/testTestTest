import{ae as z,c as L,r as w,o,k as r,z as d,h as i,i as h,j as a,I as _,t as u,f as S,l as I,$ as M,w as y,K as b,ai as B,p as f,q as D,ac as N,D as P,F as R,E as V,ad as F,R as O}from"./index-Bz0nnWdi.js";import{u as C,r as A,a as E,d as U,_ as j}from"./useMailStore-DkIp5xqy.js";const q={class:"wrapper"},J={class:"mail-title"},K={class:"mail-sub-title"},G={style:{"font-size":"0.9rem"}},H={style:{"font-size":"0.7rem",color:"#FD5959"}},Q={class:"mail-content"},W={key:0,class:"mail-attaches"},X={__name:"MailPopup",setup(T,{expose:g}){const{t:p}=z(),s=L(),m=C(),v="/testTestTest/",n=w(!1),e=w({}),c=async t=>{if(s.barLoading=!0,t.isRead==0){const l=await A({mailId:t.id});l.state==="200"?t.isRead=1:await(await f.create({message:l.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present()}e.value=t,s.barLoading=!1,n.value=!0},$=async()=>{s.barLoading=!0;const t=await E({mailId:e.value.id});t.state==="200"?(await m.getMailList(),s.barLoading=!1,n.value=!1,e.value.attachesStatus=1,await(await f.create({message:p("mail.message.receiveSuccess"),duration:1500,position:"top",color:"success",translucent:!0})).present()):(s.barLoading=!1,await(await f.create({message:t.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present())},x=async()=>{s.barLoading=!0;const t=await U({mailId:e.value.id});t.state==="200"?(await m.getMailList(),s.barLoading=!1,n.value=!1,await(await f.create({message:p("mail.message.deleteSuccess"),duration:1500,position:"top",color:"success",translucent:!0})).present()):(await(await f.create({message:t.msg,duration:1500,position:"top",color:"danger",translucent:!0})).present(),s.barLoading=!1)};return g({showMail:c}),(t,l)=>(o(),r(a(B),{class:"mail-popup",isOpen:n.value,onDidDismiss:l[1]||(l[1]=k=>n.value=!1)},{default:d(()=>[i("div",q,[h(a(_),{class:"btn-close",src:"".concat(a(v),"mail/icon-popup-close.png"),onClick:l[0]||(l[0]=k=>n.value=!1)},null,8,["src"]),i("h3",J,u(e.value.title||""),1),i("div",K,[i("div",G,u(t.$t("mail.dearPlayer"))+":",1),i("div",H,u(e.value.createTime||""),1)]),i("div",Q,u(e.value.content||""),1),e.value.attaches&&e.value.attachesStatus===0?(o(),S("div",W,[h(a(_),{src:"".concat(a(v),"mail/icon-coin.png"),style:{width:"35px",height:"35px"}},null,8,["src"]),i("div",null,u(Math.round(JSON.parse(e.value.attaches).amount*100)/100),1)])):I("",!0),e.value.attaches&&e.value.attachesStatus===0?(o(),r(a(M),{key:1,class:"btn-confirm ion-text-capitalize",fill:"solid",shape:"round",onClick:y($,["stop"])},{default:d(()=>[b(u(t.$t("mail.button.confirm")),1)]),_:1})):(o(),r(a(M),{key:2,class:"btn-del ion-text-capitalize",fill:"solid",shape:"round",onClick:y(x,["stop"])},{default:d(()=>[b(u(t.$t("mail.button.delete")),1)]),_:1}))])]),_:1},8,["isOpen"]))}},Y={slot:"start",class:"mail-icon"},Z={class:"mail-title"},aa={style:{"font-size":"1rem"}},ta={style:{"font-size":"0.7rem"}},ea={class:"mail-detail"},ia={__name:"Mail",setup(T){const g=L(),p=C(),s="/testTestTest/",m=w(null);D(async()=>{g.barLoading=!0,await p.getMailList(),g.barLoading=!1});const v=n=>{m.value.showMail(n)};return(n,e)=>(o(),r(a(V),{class:"mail"},{default:d(()=>[a(p).hasMail?(o(),r(a(N),{key:0},{default:d(()=>[(o(!0),S(R,null,P(a(p).mailList,c=>(o(),r(a(F),{key:c.id,class:"mail-item",lines:"none",onClick:y($=>v(c),["stop"])},{default:d(()=>[i("div",Y,[c.isRead?(o(),r(a(_),{key:0,class:"mail-img",src:"".concat(a(s),"mail/icon-mail-open.png")},null,8,["src"])):(o(),r(a(_),{key:1,class:"mail-img",src:"".concat(a(s),"mail/icon-mail.png")},null,8,["src"])),c.attaches&&c.attachesStatus===0?(o(),r(a(_),{key:2,class:"mail-tag",src:"".concat(a(s),"mail/icon-mail-gift.png")},null,8,["src"])):I("",!0)]),h(a(O),{class:"mail-content"},{default:d(()=>[i("div",Z,[i("div",aa,u(c.title||""),1),i("div",ta,u(c.createTime||""),1)]),i("div",ea,u(c.content||""),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(o(),r(j,{key:1,class:"no-data",desc:n.$t("mail.message.nodata")},null,8,["desc"])),h(X,{ref_key:"mailPopup",ref:m},null,512)]),_:1}))}};export{ia as default};
