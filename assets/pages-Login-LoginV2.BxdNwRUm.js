import{_ as e,g as l,a as o,u as t,K as s,B as a,D as r,R as n,o as i,c as d,w as u,b as p,n as c,d as g,m,p as h,t as y,k as f,e as b,F as x,x as w,Y as v,y as _,a0 as C,f as L,i as R,q as k,Z as V}from"./index-D6FzdE0N.js";import{_ as B,L as U}from"./LoginFotter.BTTExpMw.js";import{L as I}from"./LoginHeader.BO7J8Gr-.js";import{T}from"./toast.BErREgqV.js";import{h as N,s as O}from"./show.ByLu2JoW.js";import"./back.u9WpicZP.js";const P=e({__name:"LoginV2",setup(e){const P=l(),j=o(),S=t(),F=t().theme.loginV2,{t:$}=s();let H=a(0),J=a(!0),G=r({phone:"",otp:""}),z=r({number:"",password:""}),q=a(null),D=a(0),K=a($("login.button.send"));const Y=e=>{H.value=e,G.otp="",G.phone="",q.value=null,D.value=0,K.value=$("login.button.send"),z.number="",z.password=""},Z=async()=>{if(console.log("获取验证码"),0==D.value){if(""==G.phone)return void T.show($("login.toast.phone"));T.showLoading("Loading");const{code:e,data:l}=await v({tel:G.phone});T.hideLoading(),200==e&&(D.value=l,E())}},A=()=>{J.value=!J.value},E=()=>{K.value=D.value+"s",q.value=setInterval((()=>{D.value>0?(D.value--,K.value=D.value+"s"):(K.value=$("login.button.otp"),D.value=0,clearInterval(q.value))}),1e3)},M=()=>{_({url:"/pages/Login/Register"})},Q=()=>{P.isChangePassword=1,_({url:"/pages/Login/ForgetPassword"})},W=async()=>{if(0==H.value){if(!z.number)return void T.show($("login.toast.idOrPhone"));if(!z.password)return void T.show($("login.toast.password"));T.showLoading("Loading");const e=await P.idPasswordLogin({phoneNumber:z.number,password:z.password});if(T.hideLoading(),!e)return;C({url:"/pages/home/Home"})}if(1==H.value){if(!G.phone)return void T.show($("login.toast.phone"));if(!G.otp)return void T.show($("login.toast.oth"));T.showLoading("Loading");const e=await P.optLogin({phoneNumber:G.phone,verifyCode:G.otp});if(T.hideLoading(),!e)return;C({url:"/pages/home/Home"})}};return(e,l)=>{const o=L,t=R,s=k,a=V,r=n("common-layout");return i(),d(r,null,{default:u((()=>[p(o,{class:"login-body",style:c({background:g(S).theme.home.bgColor,backgroundSize:"100% 100%"})},{default:u((()=>[p(o,{style:c({height:g(j).headerStyle.statusBarHeight+"px"})},null,8,["style"]),p(I,{title:e.$t("login.header.title")},null,8,["title"]),p(o,{class:"login-content"},{default:u((()=>[p(o,{class:"flex-scenter"},{default:u((()=>[p(t,{class:"login-logo",src:B,mode:"aspectFit"})])),_:1}),p(o,{class:"login-form"},{default:u((()=>[p(o,{class:"login-form-header",style:c({borderBottomColor:g(F).lightGreyBg})},{default:u((()=>[p(s,{class:m(["login-form-header-item",0==g(H)?"active":""]),style:c({color:0==g(H)?g(F).tabs.highlight:g(F).tabs.normal,borderBottomColor:0==g(H)?g(F).inputBorderColor:"none"}),onClick:l[0]||(l[0]=e=>Y(0))},{default:u((()=>[h(y(g($)("login.header.Password")),1)])),_:1},8,["style","class"]),p(s,{class:m(["login-form-header-item",1==g(H)?"active":""]),style:c({color:1==g(H)?g(F).tabs.highlight:g(F).tabs.normal,borderBottomColor:1==g(H)?g(F).inputBorderColor:"none"}),onClick:l[1]||(l[1]=e=>Y(1))},{default:u((()=>[h(y(g($)("login.header.OTP")),1)])),_:1},8,["style","class"])])),_:1},8,["style"]),p(o,{class:"login-form-content"},{default:u((()=>[1==g(H)?(i(),f(x,{key:0},[p(o,{class:"login-form-input-item",style:c({background:g(F).inputeItemBg,borderRadius:g(F).borderRadius,border:g(F).inputItemBorderColor})},{default:u((()=>[p(o,{class:"login-form-input-item-label",style:c({color:""!=g(G).phone?g(F).text.labelValue:g(F).text.labelNoValue})},{default:u((()=>[h("+91")])),_:1},8,["style"]),p(a,{type:"text",modelValue:g(G).phone,"onUpdate:modelValue":l[2]||(l[2]=e=>g(G).phone=e),maxlength:"10",class:"input-style input-style-width",style:c({color:g(F).text.normal}),"placeholder-style":JSON.stringify({color:g(F).text.tipTextColor}),placeholder:e.$t("login.placeholder.phone")},null,8,["modelValue","style","placeholder-style","placeholder"])])),_:1},8,["style"]),p(o,{class:"login-form-otp-content m-top"},{default:u((()=>[p(o,{style:c({width:0==g(F).isRedUl?"405rpx":"444rpx"})},{default:u((()=>[p(o,{class:"login-form-input-item",style:c({background:g(F).inputeItemBg,borderRadius:g(F).borderRadius,border:g(F).inputItemBorderColor})},{default:u((()=>[1==g(F).isRedUl?(i(),d(o,{key:0,class:"login-form-input-item-label",style:c({color:""!=g(G).otp?g(F).text.labelValue:g(F).text.labelNoValue})},{default:u((()=>[h(y(g($)("login.button.otp")),1)])),_:1},8,["style"])):b("",!0),p(a,{type:"text",modelValue:g(G).otp,"onUpdate:modelValue":l[3]||(l[3]=e=>g(G).otp=e),class:m(["input-style input-style-width",0==g(F).isRedUl?"input-style-red-width":"input-style-width"]),style:c({color:g(F).text.normal,paddingLeft:0==g(F).isRedUl?"46rpx":"0"}),"placeholder-style":JSON.stringify({color:g(F).text.tipTextColor}),placeholder:e.$t("login.placeholder.loginOtp")},null,8,["modelValue","style","class","placeholder-style","placeholder"])])),_:1},8,["style"])])),_:1},8,["style"]),p(o,{class:"get-otp-btn",style:c({background:g(F).intervalBg,color:g(F).text.btnTextColor,borderRadius:g(F).borderRadius,width:0==g(F).isRedUl?"276rpx":"185rpx"}),onClick:Z},{default:u((()=>[h(y(g(K)),1)])),_:1},8,["style"])])),_:1})],64)):b("",!0),0==g(H)?(i(),f(x,{key:1},[p(o,{class:"login-form-input-item",style:c({background:g(F).inputeItemBg,borderRadius:g(F).borderRadius,border:g(F).inputItemBorderColor})},{default:u((()=>[p(a,{type:"text",modelValue:g(z).number,"onUpdate:modelValue":l[4]||(l[4]=e=>g(z).number=e),class:m(["input-style",0==g(F).isRedUl?"input-style-red-width1":"input-style-width1"]),style:c({color:g(F).text.normal,paddingLeft:0==g(F).isRedUl?"46rpx":"0"}),"placeholder-style":JSON.stringify({color:g(F).text.tipTextColor}),placeholder:e.$t("login.placeholder.passwordLogin")},null,8,["modelValue","style","class","placeholder-style","placeholder"])])),_:1},8,["style"]),p(o,{class:"login-form-otp-content m-top"},{default:u((()=>[p(o,{class:"login-form-input-item",style:c({background:g(F).inputeItemBg,borderRadius:g(F).borderRadius,border:g(F).inputItemBorderColor})},{default:u((()=>[p(a,{type:g(J)?"password":"text",modelValue:g(z).password,"onUpdate:modelValue":l[5]||(l[5]=e=>g(z).password=e),class:"input-style input-style-width1",style:c({color:g(F).text.normal,paddingLeft:0==g(F).isRedUl?"46rpx":"0"}),"placeholder-style":JSON.stringify({color:g(F).text.tipTextColor}),placeholder:e.$t("login.placeholder.password")},null,8,["type","modelValue","style","placeholder-style","placeholder"]),p(t,{src:g(J)?g(N):g(O).png,mode:"scaleToFill",onClick:A,class:"suffix-size"},null,8,["src"])])),_:1},8,["style"])])),_:1})],64)):b("",!0),p(o,{class:"btn-text-list",style:c({color:g(F).text.normal})},{default:u((()=>[p(s,{onClick:M},{default:u((()=>[h(y(g($)("login.button.register")),1)])),_:1}),p(s,{onClick:Q},{default:u((()=>[h(y(g($)("login.button.forgetPassword")),1)])),_:1})])),_:1},8,["style"]),p(o,{class:"submit",onClick:w(W,["stop"]),style:c({background:g(S).theme.button.linearGolden,color:g(S).theme.button.linearGoldenText})},{default:u((()=>[h(y(g($)("login.button.submit")),1)])),_:1},8,["style"])])),_:1})])),_:1}),p(U)])),_:1})])),_:1},8,["style"])])),_:1})}}},[["__scopeId","data-v-13702628"]]);export{P as default};
