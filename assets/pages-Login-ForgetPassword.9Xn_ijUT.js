import{_ as e,g as l,a as t,u as o,K as s,B as a,D as n,R as i,o as r,c as d,w as p,d as u,b as c,n as g,p as h,t as m,e as y,m as f,Y as w,aI as x,a0 as b,f as v,Z as _,i as V}from"./index-D6FzdE0N.js";import{_ as k}from"./icon-search-clear.C3jlIHgr.js";import{T as C}from"./toast.BErREgqV.js";import{p as T,n as U}from"./no-value-password.BkzrDfnG.js";import{h as I,s as L}from"./show.ByLu2JoW.js";const R=e({__name:"ForgetPassword",setup(e){const R=l();t();const B=o().theme.loginV2,P=o(),{t:j}=s();let N=a(R.isChangePassword),$=a(!0),F=n({phone:"",otp:"",password:""}),O=a(null),S=a(0),z=a(j("login.button.send"));const J=()=>{$.value=!$.value},G=()=>{F.phone=""},A=async()=>{if(0==S.value){if(""==F.phone)return void C.show(j("login.toast.phone"));C.showLoading("Loading");const{code:e,data:l}=await w({tel:F.phone});C.hideLoading(),200==e&&(S.value=l,D())}},D=()=>{z.value=S.value+"s",O.value=setInterval((()=>{S.value>0?(S.value--,z.value=S.value+"s"):(z.value=j("login.button.otp"),S.value=0,clearInterval(O.value))}),1e3)},H=async()=>{if(""==F.phone)return void C.show(j("login.toast.phone"));if(""==F.otp)return void C.show(j("login.toast.oth"));if(""==F.password)return void C.show(j("login.toast.password"));C.showLoading("Loading");const{code:e,data:l}=await x({mobile:F.phone,password:F.password,verificationCode:F.otp});C.hideLoading(),200==e&&(0==N.value?b({url:"/pages/account/Account"}):b({url:"/pages/Login/LoginV2"}))};return(e,l)=>{const t=v,o=_,s=V,a=i("mobile-sub-layout");return r(),d(a,{title:0==u(N)?e.$t("login.header.changePassword"):e.$t("login.header.forgetPassword"),lineHeight:4},{default:p((()=>[c(t,{class:"forget-password-container"},{default:p((()=>[c(t,{class:"login-form-input-item",style:g({background:u(B).inputeItemBg,border:u(B).inputItemBorderColor})},{default:p((()=>[c(t,{class:"login-form-input-item-label",style:g({color:""!=u(F).phone?u(B).text.labelValue:u(B).text.labelNoValue})},{default:p((()=>[h("+91")])),_:1},8,["style"]),c(o,{modelValue:u(F).phone,"onUpdate:modelValue":l[0]||(l[0]=e=>u(F).phone=e),style:g({color:u(B).text.normal}),maxlength:"10","placeholder-style":JSON.stringify({color:u(B).text.tipTextColor}),class:"input-style input-style-width1",placeholder:e.$t("login.placeholder.phone")},null,8,["modelValue","style","placeholder-style","placeholder"]),c(s,{src:k,mode:"scaleToFill",onClick:G,class:"suffix-size1"})])),_:1},8,["style"]),c(t,{class:"login-form-otp-content m-top"},{default:p((()=>[c(t,{style:g({width:0==u(B).isRedUl?"405rpx":"444rpx"})},{default:p((()=>[c(t,{class:"login-form-input-item",style:g({background:u(B).inputeItemBg,border:u(B).inputItemBorderColor})},{default:p((()=>[1==u(B).isRedUl?(r(),d(t,{key:0,class:"login-form-input-item-label",style:g({color:""!=u(F).otp?u(B).text.labelValue:u(B).text.labelNoValue})},{default:p((()=>[h(m(u(j)("login.button.otp")),1)])),_:1},8,["style"])):y("",!0),c(o,{type:"text",modelValue:u(F).otp,"onUpdate:modelValue":l[1]||(l[1]=e=>u(F).otp=e),style:g({color:u(B).text.normal,paddingLeft:0==u(B).isRedUl?"46rpx":"0"}),class:f([0==u(B).isRedUl?"input-style-red-width":"input-style-width","input-style"]),"placeholder-style":JSON.stringify({color:u(B).text.tipTextColor}),placeholder:e.$t("login.placeholder.loginOtp")},null,8,["modelValue","style","class","placeholder-style","placeholder"])])),_:1},8,["style"])])),_:1},8,["style"]),c(t,{class:"get-otp-btn",style:g({background:u(B).intervalBg,color:u(B).text.btnTextColor,width:0==u(B).isRedUl?"276rpx":"185rpx"}),onClick:A},{default:p((()=>[h(m(u(z)),1)])),_:1},8,["style"])])),_:1}),c(t,{class:"login-form-input-item m-top",style:g({background:u(B).inputeItemBg,border:u(B).inputItemBorderColor})},{default:p((()=>[1==u(B).isRedUl?(r(),d(t,{key:0,style:{width:"102rpx"}},{default:p((()=>[c(s,{src:""!=u(F).password?u(T):u(U),class:"password-size",mode:"scaleToFill"},null,8,["src"])])),_:1})):y("",!0),c(o,{type:u($)?"password":"text",modelValue:u(F).password,"onUpdate:modelValue":l[2]||(l[2]=e=>u(F).password=e),style:g({color:u(B).text.normal,paddingLeft:0==u(B).isRedUl?"46rpx":"0"}),"placeholder-style":JSON.stringify({color:u(B).text.tipTextColor}),class:f([0==u(B).isRedUl?"input-style-red-width1":"input-style-width1","input-style"]),placeholder:e.$t("login.placeholder.phone")},null,8,["type","modelValue","style","placeholder-style","class","placeholder"]),c(s,{src:""!=u($)?u(I):u(L).png,mode:"scaleToFill",onClick:J,class:"suffix-size"},null,8,["src"])])),_:1},8,["style"]),c(t,{class:"submit",style:g({background:u(P).theme.button.linearGolden,color:u(P).theme.button.linearGoldenText}),onClick:H},{default:p((()=>[h(m(u(j)("login.button.clickSubmit")),1)])),_:1},8,["style"]),0==u(N)?(r(),d(t,{key:0,class:"tips",style:g({color:u(B).text.normal})},{default:p((()=>[c(t,null,{default:p((()=>[h(m(u(j)("login.tips.changePasswordTipTitle")),1)])),_:1}),c(t,null,{default:p((()=>[h(m(u(j)("login.tips.changePasswordTipText")),1)])),_:1})])),_:1},8,["style"])):y("",!0)])),_:1})])),_:1},8,["title"])}}},[["__scopeId","data-v-ef4b9a03"]]);export{R as default};
